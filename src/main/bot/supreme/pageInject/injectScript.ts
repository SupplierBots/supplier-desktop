/* eslint-disable no-template-curly-in-string */ export const injectScript = (payload: any) =>
  '(async()=>{localStorage.clear();const o=Supreme.categories.models.flatMap(a=>a.attributes.products.models.flat());const p=' +
  JSON.stringify(payload) +
  ';const{keywords:q,colors:r,anySize:s,anyColor:t}=p;const u=p.size.value;const v=h(q);if(!v){return await b()}const w=await j(v);if(!w)return;const x=g(w,r,t);if(!x)return;const y=x.attributes.sizes.models.filter(a=>a.attributes.stock_level!==0);const z=f(y,u,s);if(!z){n("Sold out","Error");return}a(v,x);await c(z);function a(a,b){const c=new Date;c.setMonth(c.getMonth()+6);c.setHours(c.getHours()+1);const d=`products/${a.attributes.id}/${b.attributes.id};path=/; expires=${c.toUTCString()}`;document.cookie=`lastVisitedFragment=${d}`}async function b(){await i(1500);window.location.reload()}function c(a){n("Adding to cart","Action");const b=Promise.race([e(a),d(a)]);return b}async function d(a){const b=a.attributes.id.toString();while(!localStorage.hasOwnProperty(b)){Supreme.app.cart.addSize(a);await i(1500)}return true}async function e(a){const b=a.attributes.id.toString();while(!localStorage.hasOwnProperty(b)){await i(10)}return true}function f(a,b,c){const d=a.find(a=>a.attributes.name.toLowerCase()===b.toLowerCase());if(d||!c)return d;const e=a[Math.floor(Math.random()*a.length)];return e}function g(a,b,c){const d=a.find(a=>m(a.attributes.name,b));if(d||!c)return d;const e=a[Math.floor(Math.random()*a.length)];return e}function h(a){return o.find(b=>m(b.attributes.name,a))}async function i(a){await new Promise(b=>setTimeout(b,a))}async function j(a){const b=await Promise.race([k(a),l(a)]);return b||null}async function k(a){while(!a.attributes.styles){await i(10)}return a.attributes.styles.models}async function l(a){while(!a.attributes.styles){a.fetch();await i(1000)}}function m(a,{positive:b,negative:c,multi:d}){a=a.toLowerCase();if(!b.every(b=>a.includes(b)))return false;if(c.some(b=>a.includes(b)))return false;if(!d)return true;for(const e of d){const b=e.split(" | ");if(!b.some(b=>a.includes(b)))return false}return true}function n(a,b){fetch("http://127.0.0.1:2140/status.json",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({message:a,type:b})})}})();';
