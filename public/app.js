!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=15)}([function(e,t){e.exports=require("electron")},function(e,t){e.exports=require("rxjs/operators")},function(e,t){e.exports=require("electron-better-ipc")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("electron-updater")},function(e,t){e.exports=require("puppeteer-extra")},function(e,t){e.exports=require("moment")},function(e,t){e.exports=require("rxjs")},function(e,t){e.exports=require("fs-extra")},function(e,t){e.exports=require("ramda")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("puppeteer/DeviceDescriptors")},function(e,t){e.exports=require("puppeteer-extra-plugin-stealth")},function(e,t){e.exports=require("discord-rpc")},function(e,t){e.exports=require("electron-devtools-installer")},function(e,t,n){"use strict";function r(e,t,n,r,i,o,s){try{var a=e[o](s),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var s=e.apply(t,n);function a(e){r(s,i,o,a,l,"next",e)}function l(e){r(s,i,o,a,l,"throw",e)}a(void 0)}))}}n.r(t);var o=n(0),s=n(3),a=n.n(s),l=n(2),c=n(8),u=n.n(c),p=n(5),d=n.n(p);const h="686378",f=function(){var e=i((function*(e){const t=o.app.getPath("userData"),n=a.a.resolve(t,".local-chromium");try{u.a.accessSync(n);const e=d.a.createBrowserFetcher({path:n});if((yield e.localRevisions()).length<1)return!1;const t=e.revisionInfo(h).executablePath,r=yield d.a.launch({executablePath:t,headless:!0}),i=yield r.newPage();return yield i.goto("http://example.com/"),yield r.close(),{success:!0,executablePath:t,version:o.app.getVersion()}}catch(e){return console.log("Error while testing browser."),console.log(e),u.a.removeSync(n),{success:!1,executablePath:"fail",version:o.app.getVersion()}}}));return function(t){return e.apply(this,arguments)}}(),y=e=>{const t=a.a.resolve(o.app.getPath("userData"),".local-chromium"),n=d.a.createBrowserFetcher({path:t});let r=0;n.download(h,function(){var e=i((function*(e,t){const n={progress:Math.round(e/t*100),done:e===t};(n.progress>r||n.done)&&(r=n.progress,null==se||se.webContents.send("CHROMIUM_DOWNLOAD_PROGRESS",n))}));return function(t,n){return e.apply(this,arguments)}}())};var g=n(11),m=n.n(g),b=n(12),v=n.n(b);var w=function(){var e=i((function*(e,t=0){te.browserStateChange(e,!0);const n=o.app.getPath("userData"),r=d.a.createBrowserFetcher({path:a.a.resolve(n,".local-chromium")}).revisionInfo(h).executablePath,s=a.a.resolve(n,e),{width:l,height:c,deviceScaleFactor:u}=m.a["Pixel 2"].viewport;d.a.use(v()());const p=yield d.a.launch({headless:!1,ignoreHTTPSErrors:!0,ignoreDefaultArgs:["--enable-automation"],args:["--no-sandbox","--disable-gpu","--disable-infobars","--disable-setuid-sandbox","--disable-dev-shm-usage","--ignore-certifcate-errors","--ignore-certifcate-errors-spki-list",`--user-data-dir=${s}`,`--window-size=${l},${c+82}`,`--window-position=${0+500*t},0`],executablePath:r}),f=yield p.newPage(),y=yield f.target().createCDPSession();return p.on("targetcreated",e=>{e.url().includes("devtools")&&p.close()}),y.send("Network.setUserAgentOverride",{userAgent:"Mozilla/5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3882.0 Mobile Safari/537.36",locale:"en-US,en",platform:"linux"}),yield Promise.all([y.send("Emulation.setDeviceMetricsOverride",{mobile:!0,width:l,height:c,deviceScaleFactor:u,screenOrientation:{angle:0,type:"portraitPrimary"}}),y.send("Emulation.setTouchEmulationEnabled",{enabled:!0}),y.send("Emulation.setEmitTouchEventsForMouse",{enabled:!0,configuration:"desktop"})]),f.on("close",i((function*(){yield p.close()}))),p.on("disconnected",i((function*(){te.browserStateChange(e,!1)}))),p}));return function(t){return e.apply(this,arguments)}}();const S=function(){var e=i((function*(e,t){const n=e.browser();e?(yield e.goto("https://accounts.google.com/signin/v2/identifier?flowName=GlifWebSignIn&flowEntry=ServiceLogin&hl=en"),e.on("load",i((function*(){if(!e.url().includes("https://myaccount.google.com/"))return;yield e.waitForXPath("//div[contains(text(),'@gmail.com')]");const r=yield e.$x("//div[contains(text(),'@gmail.com')]");if(r.length<1)return;const[i]=r,o=yield i.getProperty("innerText");let s=yield o.jsonValue();const a=yield te.getSameEmails(s);a&&a.length>0&&(s+=` (${a.length+1})`),te.setBrowserEmail(t,s),n.close()})))):n.close()}));return function(t,n){return e.apply(this,arguments)}}();var k=n(9),O=n(10),E=n.n(O),T=n(7),C=n(1);const x=()=>Math.random().toString(36).substring(2,15);class P{constructor(){}static init(e){this.unsubscribeAll(),this.subscriptions=[];const t=Object(T.timer)(0,e).pipe(Object(C.switchMap)(()=>E.a.get(`https://www.supremenewyork.com/shop.json?${x()}=${x()}`,{transformResponse:e=>e})),Object(C.pluck)("data"),Object(C.retryWhen)(t=>t.pipe(Object(C.delay)(e)))),n=Object(T.timer)(e/2,e).pipe(Object(C.switchMap)(()=>E.a.get(`https://www.supremenewyork.com/mobile_stock.json?${x()}=${x()}`,{transformResponse:e=>e})),Object(C.pluck)("data"),Object(C.retryWhen)(t=>t.pipe(Object(C.delay)(e))));this.observable=Object(T.merge)(t,n).pipe(Object(C.distinctUntilChanged)(),Object(C.map)(e=>{const t=JSON.parse(e);if(t.error||!t.products_and_categories)throw new Error("Invalid response");return t}),Object(C.retryWhen)(t=>t.pipe(Object(C.delay)(e))),Object(C.shareReplay)({refCount:!0}))}static subscribe(e){const t=this.observable.subscribe(e);return this.subscriptions.push(t),t}static unsubscribeAll(){this.subscriptions.forEach(e=>e.unsubscribe())}}function D(e,t){return A.apply(this,arguments)}function A(){return(A=i((function*(e,t){const n=e.postData();if(t.logger.reportRequest(e),"http://127.0.0.1:2140/status.json"!==e.url()||!n)return;const r=JSON.parse(n);if("ATC"===r.message)return yield t.checkout();te.updateTaskStatus(t.task,r),"Sold out"===r.message&&(yield t.page.close(),yield t.page.browser().close())}))).apply(this,arguments)}let R;function M(e,t){return _.apply(this,arguments)}function _(){return(_=i((function*(e,t){const n=e.status(),r=e.url();if(t.logger.reportResponse(e),/.*checkout.json$/.test(r)&&200!==n)return t.updateTaskStatus({message:`${n}. Retrying`,type:R.Error}),void(yield t.retry());if(200===n)if(/.*add.json$/.test(r)){const n=yield e.json();n.length>0?t.updateTaskStatus({message:"Added to cart",type:R.Action}):0===n.length&&(t.updateTaskStatus({message:"Size sold out",type:R.Error}),yield t.retry())}else if(/.*(checkout|status).json$/.test(r)){const n=yield e.json();switch(n.status){case"failed":case"404":case"500":case"outOfStock":{const e="outOfStock"===n.status?"Size sold out":"Failed. Retrying";return t.updateTaskStatus({message:e,type:R.Error}),void(yield t.retry())}case"queued":return void t.updateTaskStatus({message:"Processing",type:R.Action});case"dup":return t.updateTaskStatus({message:"Duplicate order",type:R.Error}),yield t.page.close(),void(yield t.browser.close());case"paid":return t.updateTaskStatus({message:"Success",type:R.Success,additionalInfo:n.id}),te.reportCheckout(),yield t.page.close(),void(yield t.browser.close())}}}))).apply(this,arguments)}function I(e,t){return j.apply(this,arguments)}function j(){return(j=i((function*(e,t=!0){yield this.page.waitForXPath(e,{visible:!0});const n=yield this.page.$x(e);let r=[];for(let e of n){const n=yield e.boundingBox(),i=yield e.isIntersectingViewport();null!==n&&i&&r.push(e),null===n||t||r.push(e)}return r[0]}))).apply(this,arguments)}function $({firstName:e,lastName:t,address1:n,address2:r,city:i,postcode:o,email:s,telephone:a,country:l}){return{name:"js-address",value:`${e} ${t}|${s}|${a}|${n}|${r}|${i}|undefined|${o}|${null==l?void 0:l.value}|`.replace(/ /g,"%20").replace(/@/g,"%40"),domain:".supremenewyork.com"}}function U(e){return L.apply(this,arguments)}function L(){return(L=i((function*(){if(!this.profile)return;const e=yield this.page.cookies("https://www.supremenewyork.com/");yield this.page.deleteCookie(...e),yield this.page.setCookie($(this.profile)),this.logger.writeObject({message:"Prepared cookies!"})}))).apply(this,arguments)}function B(e,t,n){return N.apply(this,arguments)}function N(){return(N=i((function*(e,t){yield this.page.waitForXPath(e,{visible:!0});const[n]=yield this.page.$x(e),r=yield n.getProperty("id"),i=yield r.jsonValue();yield this.page.select(`#${i}`,t)}))).apply(this,arguments)}P.observable=void 0,P.subscriptions=[],function(e){e.Inactive="Inactive",e.Action="Action",e.Success="Success",e.Error="Error"}(R||(R={}));const q=(e,t,n,r=!1,i=[])=>{let o=`//${e}[`;n=n.toLowerCase();for(let e of n)o+=` (contains(${t}, '${e}') or contains(${t}, '${e.toUpperCase()}')) and`;return o=o.slice(0,-4),i.forEach(e=>{e=e.toLowerCase(),o+=` and not(contains(${t}, '${e}')) and not(contains(${t}, '${e.toUpperCase()}'))`}),o+="]",r&&(o+="/parent::*"),o},W={addBtn:q("span","text()","add to",!1,["checkout","remove"]),addBtnDesktop:q("input","@value","add to",!1,["checkout","remove"]),checkoutBtn:q("span","text()","checkout",!0,["add","remove","basket"]),checkoutBtnDesktop:q("a","text()","checkout",!1,["add","remove","basket"]),cvv:q("input","@placeholder","cv",!1,["num","name"]),creditCardNumber:q("input","@placeholder","number",!1,["name","tel"]),termsLabel:q("label","text()","I have read")+"//preceding::input[@type='checkbox' and not(contains(@id, 'address'))]",processBtn:q("span","text()","process",!0,["cancel","edit"]),processBtnDesktop:q("input","@value","process",!1,["cancel","edit"])+"[@type='submit']",cardTypeSelect:"//option[contains(text(),'astercard')]/parent::*",monthSelect:"//option[contains(text(),'06')]/parent::*",yearSelect:"//option[contains(text(),'2021')]/parent::*",itemName:"//*[@class='name']",itemSelectable:"//*[@class='selectable']",price:"//*[@class='price']",recaptchaCSS:"*[name='g-recaptcha-response']"},V=()=>String.fromCharCode(40,40,41,61,62,123,114,101,116,117,114,110,32,110,101,119,32,80,114,111,109,105,115,101,40,40,97,44,98,41,61,62,123,40,102,117,110,99,116,105,111,110,32,98,40,41,123,99,111,110,115,116,32,100,61,123,125,59,100,111,99,117,109,101,110,116,46,99,111,111,107,105,101,46,115,112,108,105,116,40,34,59,34,41,46,102,111,114,69,97,99,104,40,97,61,62,123,99,111,110,115,116,91,98,44,99,93,61,97,46,115,112,108,105,116,40,34,61,34,41,59,105,102,40,33,97,46,105,110,99,108,117,100,101,115,40,34,61,34,41,41,114,101,116,117,114,110,59,100,91,98,46,116,114,105,109,40,41,93,61,99,46,116,114,105,109,40,41,125,41,59,105,102,40,33,100,91,34,116,105,99,107,101,116,34,93,124,124,33,100,91,34,95,116,105,99,107,101,116,34,93,41,97,40,41,59,99,111,110,115,116,32,101,61,112,97,114,115,101,73,110,116,40,100,91,34,95,116,105,99,107,101,116,34,93,46,115,117,98,115,116,114,40,100,91,34,95,116,105,99,107,101,116,34,93,46,108,101,110,103,116,104,45,49,48,41,41,59,99,111,110,115,116,32,102,61,112,97,114,115,101,73,110,116,40,100,91,34,116,105,99,107,101,116,34,93,46,115,117,98,115,116,114,40,100,91,34,116,105,99,107,101,116,34,93,46,108,101,110,103,116,104,45,49,48,41,41,59,105,102,40,101,60,61,102,41,123,115,101,116,84,105,109,101,111,117,116,40,98,44,49,48,48,41,59,114,101,116,117,114,110,125,116,114,121,123,100,111,99,117,109,101,110,116,46,113,117,101,114,121,83,101,108,101,99,116,111,114,40,34,35,109,111,98,105,108,101,95,99,104,101,99,107,111,117,116,95,102,111,114,109,34,41,46,115,101,116,65,116,116,114,105,98,117,116,101,40,34,100,97,116,97,45,99,114,101,100,105,116,95,118,101,114,105,102,105,101,100,34,44,49,41,125,99,97,116,99,104,123,125,97,40,41,125,41,40,41,125,41,125,41,40,41,59);function F(e){return z.apply(this,arguments)}function z(){return(z=i((function*(){var e,t,n;if(!(this.profile&&(null===(e=this.profile.month)||void 0===e?void 0:e.value)&&(null===(t=this.profile.year)||void 0===t?void 0:t.value)&&(null===(n=this.profile.creditCardType)||void 0===n?void 0:n.value)))return;const r=yield this.getVisibleElement(W.checkoutBtn);yield r.tap(),yield this.page.waitForXPath(W.cardTypeSelect,{visible:!0,timeout:0}),this.updateTaskStatus({message:"Checking out",type:R.Action});const i=Date.now(),{creditCardType:o,month:s,year:a,creditCardNumber:l,cvv:c}=this.profile;yield this.selectOption(W.cardTypeSelect,o.value),yield this.selectOption(W.monthSelect,s.value),yield this.selectOption(W.yearSelect,a.value);const u=yield this.getVisibleElement(W.creditCardNumber);yield u.tap(),yield u.type(l);const p=yield this.getVisibleElement(W.cvv);yield p.tap(),yield p.type(c.toString());const d=yield this.getVisibleElement(W.termsLabel,!1);yield d.tap();const h=Date.now()-i.valueOf(),f="string"==typeof this.task.checkoutDelay?parseInt(this.task.checkoutDelay):this.task.checkoutDelay;if(h<f){this.updateTaskStatus({message:"Checkout delay",type:R.Action});const e=f-h;yield new Promise(t=>setTimeout(t,e))}yield this.page.evaluate(V());const y=yield this.getVisibleElement(W.processBtn,!1);yield y.tap(),this.updateTaskStatus({message:"Waiting for response",type:R.Action})}))).apply(this,arguments)}function H(e){return G.apply(this,arguments)}function G(){return(G=i((function*(){this.updateTaskStatus({message:"Waiting for products",type:R.Action});try{yield this.page.goto("https://www.supremenewyork.com/mobile/",{timeout:3e3}),this.logger.writeString("Loaded main page!")}catch{return void(yield this.loadMainPage())}}))).apply(this,arguments)}class K{constructor(e,t){this.id=e,this.page=t,this.reportRequest=e=>{},this.reportResponse=function(){var e=i((function*(e){}));return function(t){return e.apply(this,arguments)}}(),this.writeObject=function(){var e=i((function*(e,t=!0){}));return function(t){return e.apply(this,arguments)}}(),this.writeString=(e,t=!0)=>{}}}var X=n(6),Y=n.n(X);var J=class{constructor(e,t,n,r){var o=this;this.page=e,this.task=t,this.product=n,this.scheduledDate=r,this.browser=void 0,this.checkoutDelay=void 0,this.externalStock=null,this.profile=null,this.logger=void 0,this.init=i((function*(){var e;P.subscribe(o.setStock),o.task.profile&&(o.profile=null!==(e=yield te.getProfile(o.task.profile.value))&&void 0!==e?e:null,o.page.on("request",e=>o.parseRequest(e,o)),o.page.on("response",e=>o.parseResponse(e,o)),o.page.on("load",()=>o.onLoad()),o.logger.writeString("Started fast task!"),yield o.prepareCookies(),yield o.loadMainPage())})),this.onLoad=i((function*(){try{if(!(yield o.page.evaluate("window.location.href")).includes("#checkout")){const n=o.scheduledDate.valueOf()-Y()().valueOf();yield new Promise(e=>setTimeout(e,n));const r=(e=o.product,t=o.externalStock,'(async()=>{localStorage.clear();if(typeof Supreme==="undefined")return await a();const o='+JSON.stringify(e)+";const p="+JSON.stringify(t)+String.fromCharCode(59,99,111,110,115,116,123,107,101,121,119,111,114,100,115,58,113,44,99,111,108,111,114,115,58,114,44,97,110,121,83,105,122,101,58,115,44,97,110,121,67,111,108,111,114,58,116,125,61,111,59,99,111,110,115,116,32,117,61,111,46,115,105,122,101,46,118,97,108,117,101,59,108,101,116,32,118,61,103,40,113,41,59,105,102,40,33,118,38,38,112,41,123,110,40,112,41,59,118,61,103,40,113,41,125,105,102,40,33,118,41,123,114,101,116,117,114,110,32,97,119,97,105,116,32,97,40,41,125,99,111,110,115,116,32,119,61,97,119,97,105,116,32,105,40,118,41,59,105,102,40,33,119,41,114,101,116,117,114,110,59,99,111,110,115,116,32,120,61,102,40,119,44,114,44,116,41,59,105,102,40,33,120,41,114,101,116,117,114,110,59,99,111,110,115,116,32,121,61,120,46,97,116,116,114,105,98,117,116,101,115,46,115,105,122,101,115,46,109,111,100,101,108,115,46,102,105,108,116,101,114,40,97,61,62,97,46,97,116,116,114,105,98,117,116,101,115,46,115,116,111,99,107,95,108,101,118,101,108,33,61,61,48,41,59,99,111,110,115,116,32,122,61,101,40,121,44,117,44,115,41,59,105,102,40,33,122,41,123,109,40,34,83,111,108,100,32,111,117,116,34,44,34,69,114,114,111,114,34,41,59,114,101,116,117,114,110,125,97,119,97,105,116,32,98,40,122,41,59,97,119,97,105,116,32,104,40,50,53,48,41,59,109,40,34,65,84,67,34,44,34,65,99,116,105,111,110,34,41,59,97,115,121,110,99,32,102,117,110,99,116,105,111,110,32,97,40,41,123,97,119,97,105,116,32,104,40,49,53,48,48,41,59,119,105,110,100,111,119,46,108,111,99,97,116,105,111,110,46,114,101,108,111,97,100,40,41,125,97,115,121,110,99,32,102,117,110,99,116,105,111,110,32,98,40,97,41,123,109,40,34,65,100,100,105,110,103,32,116,111,32,99,97,114,116,34,44,34,65,99,116,105,111,110,34,41,59,99,111,110,115,116,32,98,61,97,119,97,105,116,32,80,114,111,109,105,115,101,46,114,97,99,101,40,91,100,40,97,41,44,99,40,97,41,93,41,59,105,102,40,33,83,117,112,114,101,109,101,46,97,112,112,46,99,97,114,116,46,97,116,116,114,105,98,117,116,101,115,46,115,105,122,101,115,46,99,111,110,116,97,105,110,115,40,97,41,41,123,83,117,112,114,101,109,101,46,97,112,112,46,99,97,114,116,46,97,100,100,83,105,122,101,84,111,76,111,99,97,108,83,116,111,114,97,103,101,40,97,44,49,41,59,83,117,112,114,101,109,101,46,97,112,112,46,99,97,114,116,46,97,116,116,114,105,98,117,116,101,115,46,115,105,122,101,115,46,97,100,100,40,97,44,49,41,125,115,101,116,83,101,115,115,105,111,110,73,68,115,40,41,59,114,101,116,117,114,110,32,98,125,97,115,121,110,99,32,102,117,110,99,116,105,111,110,32,99,40,97,41,123,99,111,110,115,116,32,98,61,97,46,97,116,116,114,105,98,117,116,101,115,46,105,100,46,116,111,83,116,114,105,110,103,40,41,59,119,104,105,108,101,40,33,108,111,99,97,108,83,116,111,114,97,103,101,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,98,41,41,123,83,117,112,114,101,109,101,46,97,112,112,46,99,97,114,116,46,114,101,109,111,118,101,83,105,122,101,68,105,114,101,99,116,108,121,40,98,41,59,83,117,112,114,101,109,101,46,97,112,112,46,99,97,114,116,46,97,100,100,83,105,122,101,40,97,41,59,97,119,97,105,116,32,104,40,49,53,48,48,41,125,114,101,116,117,114,110,32,116,114,117,101,125,97,115,121,110,99,32,102,117,110,99,116,105,111,110,32,100,40,97,41,123,99,111,110,115,116,32,98,61,97,46,97,116,116,114,105,98,117,116,101,115,46,105,100,46,116,111,83,116,114,105,110,103,40,41,59,119,104,105,108,101,40,33,108,111,99,97,108,83,116,111,114,97,103,101,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,98,41,41,123,97,119,97,105,116,32,104,40,49,48,41,125,114,101,116,117,114,110,32,116,114,117,101,125,102,117,110,99,116,105,111,110,32,101,40,97,44,98,44,99,41,123,99,111,110,115,116,32,100,61,97,46,102,105,110,100,40,97,61,62,97,46,97,116,116,114,105,98,117,116,101,115,46,110,97,109,101,46,116,111,76,111,119,101,114,67,97,115,101,40,41,61,61,61,98,46,116,111,76,111,119,101,114,67,97,115,101,40,41,41,59,105,102,40,100,124,124,33,99,41,114,101,116,117,114,110,32,100,59,99,111,110,115,116,32,101,61,97,91,77,97,116,104,46,102,108,111,111,114,40,77,97,116,104,46,114,97,110,100,111,109,40,41,42,97,46,108,101,110,103,116,104,41,93,59,114,101,116,117,114,110,32,101,125,102,117,110,99,116,105,111,110,32,102,40,97,44,98,44,99,41,123,99,111,110,115,116,32,100,61,97,46,102,105,110,100,40,97,61,62,108,40,97,46,97,116,116,114,105,98,117,116,101,115,46,110,97,109,101,44,98,41,41,59,105,102,40,100,124,124,33,99,41,114,101,116,117,114,110,32,100,59,99,111,110,115,116,32,101,61,97,91,77,97,116,104,46,102,108,111,111,114,40,77,97,116,104,46,114,97,110,100,111,109,40,41,42,97,46,108,101,110,103,116,104,41,93,59,114,101,116,117,114,110,32,101,125,102,117,110,99,116,105,111,110,32,103,40,97,41,123,99,111,110,115,116,32,98,61,83,117,112,114,101,109,101,46,99,97,116,101,103,111,114,105,101,115,46,109,111,100,101,108,115,46,102,108,97,116,77,97,112,40,97,61,62,97,46,97,116,116,114,105,98,117,116,101,115,46,112,114,111,100,117,99,116,115,46,109,111,100,101,108,115,46,102,108,97,116,40,41,41,59,114,101,116,117,114,110,32,98,46,102,105,110,100,40,98,61,62,108,40,98,46,97,116,116,114,105,98,117,116,101,115,46,110,97,109,101,44,97,41,41,125,97,115,121,110,99,32,102,117,110,99,116,105,111,110,32,104,40,97,41,123,97,119,97,105,116,32,110,101,119,32,80,114,111,109,105,115,101,40,98,61,62,115,101,116,84,105,109,101,111,117,116,40,98,44,97,41,41,125,97,115,121,110,99,32,102,117,110,99,116,105,111,110,32,105,40,97,41,123,99,111,110,115,116,32,98,61,97,119,97,105,116,32,80,114,111,109,105,115,101,46,114,97,99,101,40,91,106,40,97,41,44,107,40,97,41,93,41,59,114,101,116,117,114,110,32,98,124,124,110,117,108,108,125,97,115,121,110,99,32,102,117,110,99,116,105,111,110,32,106,40,97,41,123,119,104,105,108,101,40,33,97,46,97,116,116,114,105,98,117,116,101,115,46,115,116,121,108,101,115,41,123,97,119,97,105,116,32,104,40,49,48,41,125,114,101,116,117,114,110,32,97,46,97,116,116,114,105,98,117,116,101,115,46,115,116,121,108,101,115,46,109,111,100,101,108,115,125,97,115,121,110,99,32,102,117,110,99,116,105,111,110,32,107,40,97,41,123,119,104,105,108,101,40,33,97,46,97,116,116,114,105,98,117,116,101,115,46,115,116,121,108,101,115,41,123,97,46,102,101,116,99,104,40,41,59,97,119,97,105,116,32,104,40,49,48,48,48,41,125,125,102,117,110,99,116,105,111,110,32,108,40,97,44,123,112,111,115,105,116,105,118,101,58,98,44,110,101,103,97,116,105,118,101,58,99,44,109,117,108,116,105,58,100,125,41,123,97,61,97,46,116,111,76,111,119,101,114,67,97,115,101,40,41,59,105,102,40,33,98,46,101,118,101,114,121,40,98,61,62,97,46,105,110,99,108,117,100,101,115,40,98,41,41,41,114,101,116,117,114,110,32,102,97,108,115,101,59,105,102,40,99,46,115,111,109,101,40,98,61,62,97,46,105,110,99,108,117,100,101,115,40,98,41,41,41,114,101,116,117,114,110,32,102,97,108,115,101,59,105,102,40,33,100,41,114,101,116,117,114,110,32,116,114,117,101,59,102,111,114,40,99,111,110,115,116,32,101,32,111,102,32,100,41,123,99,111,110,115,116,32,98,61,101,46,115,112,108,105,116,40,34,32,124,32,34,41,59,105,102,40,33,98,46,115,111,109,101,40,98,61,62,97,46,105,110,99,108,117,100,101,115,40,98,41,41,41,114,101,116,117,114,110,32,102,97,108,115,101,125,114,101,116,117,114,110,32,116,114,117,101,125,102,117,110,99,116,105,111,110,32,109,40,97,44,98,41,123,102,101,116,99,104,40,34,104,116,116,112,58,47,47,49,50,55,46,48,46,48,46,49,58,50,49,52,48,47,115,116,97,116,117,115,46,106,115,111,110,34,44,123,109,101,116,104,111,100,58,34,80,79,83,84,34,44,104,101,97,100,101,114,115,58,123,65,99,99,101,112,116,58,34,97,112,112,108,105,99,97,116,105,111,110,47,106,115,111,110,34,44,34,67,111,110,116,101,110,116,45,84,121,112,101,34,58,34,97,112,112,108,105,99,97,116,105,111,110,47,106,115,111,110,34,125,44,98,111,100,121,58,74,83,79,78,46,115,116,114,105,110,103,105,102,121,40,123,109,101,115,115,97,103,101,58,97,44,116,121,112,101,58,98,125,41,125,41,125,102,117,110,99,116,105,111,110,32,110,40,97,41,123,97,108,108,67,97,116,101,103,111,114,105,101,115,65,110,100,80,114,111,100,117,99,116,115,61,97,59,119,105,110,100,111,119,46,114,101,108,101,97,115,101,95,119,101,101,107,61,97,46,114,101,108,101,97,115,101,95,119,101,101,107,59,119,105,110,100,111,119,46,114,101,108,101,97,115,101,95,100,97,116,101,61,97,46,114,101,108,101,97,115,101,95,100,97,116,101,59,83,117,112,114,101,109,101,46,99,97,116,101,103,111,114,105,101,115,61,110,101,119,32,67,97,116,101,103,111,114,105,101,115,59,83,117,112,114,101,109,101,46,99,97,116,101,103,111,114,105,101,115,46,112,111,112,117,108,97,116,101,40,97,41,125,125,41,40,41,59));yield o.page.evaluate(r)}}catch{}var e,t})),this.loadPageScript=i((function*(){})),this.updateTaskStatus=({message:e,type:t,additionalInfo:n})=>{te.updateTaskStatus(this.task,{message:e,type:t,additionalInfo:n})},this.retry=i((function*(){try{yield new Promise(e=>setTimeout(e,1e3)),yield o.prepareCookies(),yield o.loadMainPage(),yield o.page.reload()}catch{}})),this.setStock=e=>{this.externalStock={...e}},this.parseRequest=D,this.parseResponse=M,this.getVisibleElement=I,this.prepareCookies=U,this.selectOption=B,this.checkout=F,this.loadMainPage=H,this.logger=new K(t.id,e),this.browser=this.page.browser(),this.checkoutDelay="string"==typeof this.task.checkoutDelay?parseInt(this.task.checkoutDelay):this.task.checkoutDelay}};class Z{constructor(){this.browsers=[]}static getInstance(){var e;return this.instance=null!==(e=this.instance)&&void 0!==e?e:new Z,this.instance}setup(e){var t=this;return i((function*(){try{const n=yield w(e.id);t.browsers.push(n);const r=yield n.pages(),i=k.last(r);if(!i)return void n.close();S(i,e.id)}catch{te.browserStateChange(e.id,!1)}}))()}startTasks(e,t){var n=this;return i((function*(){const r=Y()(`${t.date} ${t.time}`,"DD/MM/YYYY HH:mm:ss");t.enabled?Z.timerID=setInterval(()=>{Y()().valueOf()+6e4>=r.valueOf()&&(clearInterval(Z.timerID),n.initializeTasks(e,r))},1e3):n.initializeTasks(e,r)}))()}initializeTasks(e,t){var n=this;return i((function*(){e.forEach(function(){var e=i((function*(e,r){var i;if(!e.browser)return;const o=yield w(null===(i=e.browser)||void 0===i?void 0:i.value,r),s=yield te.getProduct(e.products[0]);n.browsers.push(o);const a=yield o.pages(),l=k.last(a);if(l&&s)try{const n=new J(l,e,s,t);yield n.init()}catch{}}));return function(t,n){return e.apply(this,arguments)}}()),te.resetTimerState();const r=t.valueOf()-Y()().valueOf();yield new Promise(e=>setTimeout(e,r-1e4)),P.init(2e3)}))()}stopAll(){var e=this;return i((function*(){P.unsubscribeAll(),clearInterval(Z.timerID);const t=[];e.browsers.forEach(n=>{n.isConnected()&&t.push(e.closeBrowser(n))}),e.browsers=[],yield Promise.all(t)}))()}closeBrowser(e){return i((function*(){for(let t of yield e.pages())yield t.close({runBeforeUnload:!0});yield e.close()}))()}}Z.instance=void 0,Z.timerID=void 0;var Q=Z,ee=n(4);class te{constructor(){}}te.registerListeners=()=>{l.ipcMain.answerRenderer("VERIFY_CHROME",f),l.ipcMain.on("DOWNLOAD_CHROMIUM",y),l.ipcMain.on("SETUP_BROWSER",(e,t)=>Q.getInstance().setup(t)),l.ipcMain.on("START_TASKS",(e,t,n)=>Q.getInstance().startTasks(t,n)),l.ipcMain.on("STOP_TASKS",e=>Q.getInstance().stopAll()),l.ipcMain.on("WINDOW_MINIMIZE",()=>null==se?void 0:se.minimize()),l.ipcMain.on("WINDOW_CLOSE",()=>null==se?void 0:se.close()),l.ipcMain.on("DOWNLOAD_UPDATE",()=>{ee.autoUpdater.downloadUpdate()}),l.ipcMain.on("RELAUNCH",()=>{o.app.relaunch(),o.app.exit()})},te.setupUpdater=i((function*(){ee.autoUpdater.autoDownload=!1,ee.autoUpdater.on("update-available",e=>{null==se||se.webContents.send("UPDATE_AVAILABLE",e)}),ee.autoUpdater.on("error",e=>{null==se||se.webContents.send("UPDATE_DOWNLOAD_ERROR",e)}),ee.autoUpdater.signals.progress(e=>{null==se||se.webContents.send("UPDATE_DOWNLOAD_PROGRESS",e)}),ee.autoUpdater.signals.updateDownloaded(e=>{null==se||se.webContents.send("UPDATE_DOWNLOADED",e),ee.autoUpdater.quitAndInstall()}),yield ee.autoUpdater.checkForUpdates(),setInterval(()=>ee.autoUpdater.checkForUpdates(),3e5)})),te.getProfile=function(){var e=i((function*(e){if(!se)return;return yield l.ipcMain.callRenderer(se,"GET_PROFILE",e)}));return function(t){return e.apply(this,arguments)}}(),te.getProduct=function(){var e=i((function*(e){if(!se)return;return yield l.ipcMain.callRenderer(se,"GET_PRODUCT",e)}));return function(t){return e.apply(this,arguments)}}(),te.updateTaskStatus=(e,t)=>{if(!se)return;const n={...e,status:t};se.webContents.send("UPDATE_TASK_STATUS",n)},te.getSameEmails=function(){var e=i((function*(e){if(!se)return;return yield l.ipcMain.callRenderer(se,"GET_SAME_EMAILS",e)}));return function(t){return e.apply(this,arguments)}}(),te.browserStateChange=(e,t)=>{null==se||se.webContents.send("BROWSER_STATE_CHANGE",{id:e,status:t})},te.setBrowserEmail=(e,t)=>{null==se||se.webContents.send("SET_BROWSER_EMAIL",{id:e,email:t})},te.reportCheckout=()=>{null==se||se.webContents.send("REPORT_CHECKOUT")},te.resetTimerState=()=>{null==se||se.webContents.send("RESET_TIMER_STATE")};const ne=o.Menu.buildFromTemplate([{label:"Application",submenu:[{label:"About Application",role:"about"},{type:"separator"},{label:"Quit",accelerator:"Command+Q",click:()=>o.app.quit()}]},{label:"Edit",submenu:[{label:"Undo",accelerator:"CmdOrCtrl+Z",role:"undo"},{label:"Redo",accelerator:"Shift+CmdOrCtrl+Z",role:"redo"},{type:"separator"},{label:"Cut",accelerator:"CmdOrCtrl+X",role:"cut"},{label:"Copy",accelerator:"CmdOrCtrl+C",role:"copy"},{label:"Paste",accelerator:"CmdOrCtrl+V",role:"paste"},{label:"Select All",accelerator:"CmdOrCtrl+A",role:"selectAll"}]}]);const re=new(n(13).Client)({transport:"ipc"}),ie=function(){var e=i((function*(){try{yield re.login({clientId:"696377645285507183"})}catch{return}re.setActivity({details:`Version: ${oe?"dev":o.app.getVersion()}`,startTimestamp:Date.now(),largeImageKey:"logo",instance:!0})}));return function(){return e.apply(this,arguments)}}();n.d(t,"isDev",(function(){return oe})),n.d(t,"mainWindow",(function(){return se}));const oe=!1;let se=null;const ae=function(){var e=i((function*(){const e=n(14),t=["REACT_DEVELOPER_TOOLS","REDUX_DEVTOOLS"],r=!!process.env.UPGRADE_EXTENSIONS;for(const n of t)try{yield e.default(e[n],r)}catch(e){console.log(`Error installing ${n} extension: ${e.message}`)}}));return function(){return e.apply(this,arguments)}}(),le=()=>{oe&&ae();const e={width:1200,height:750,frame:!1,show:!1,resizable:!1,maximizable:!1,fullscreenable:!1,titleBarStyle:"hiddenInset",webPreferences:{nodeIntegration:oe,preload:oe?void 0:a.a.join(__dirname,"preload.js"),backgroundThrottling:!1}};se=new o.BrowserWindow(e);const t=oe?"http://localhost:3000":`file://${a.a.join(__dirname,"../build/index.html")}`;se.loadURL(t),se.once("ready-to-show",()=>{var e;ie(),null===(e=se)||void 0===e||e.show()}),se.webContents.once("did-finish-load",()=>{se&&oe&&(se.webContents.openDevTools(),se.webContents.on("context-menu",(e,t)=>{o.Menu.buildFromTemplate([{label:"Inspect element",click:()=>{se.inspectElement(t.x,t.y)}}]).popup(se)}))}),se.on("closed",()=>se=null)};o.app.whenReady().then(le),oe||o.Menu.setApplicationMenu(ne),o.powerSaveBlocker.start("prevent-display-sleep"),o.app.on("window-all-closed",()=>{"darwin"!==process.platform&&o.app.quit()}),o.app.on("activate",()=>{null===se&&le()}),te.registerListeners(),oe||te.setupUpdater()}]);