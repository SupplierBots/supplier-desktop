!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t){e.exports=require("rxjs/operators")},function(e,t){e.exports=require("electron")},function(e,t){e.exports=require("electron-better-ipc")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("puppeteer-extra")},function(e,t){e.exports=require("rxjs")},function(e,t){e.exports=require("fs-extra")},function(e,t){e.exports=require("ramda")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("puppeteer/DeviceDescriptors")},function(e,t){e.exports=require("puppeteer-extra-plugin-stealth")},function(e,t){e.exports=require("electron-devtools-installer")},function(e,t,n){"use strict";function i(e,t,n,i,r,s,o){try{var a=e[s](o),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(i,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var o=e.apply(t,n);function a(e){i(o,r,s,a,c,"next",e)}function c(e){i(o,r,s,a,c,"throw",e)}a(void 0)}))}}n.r(t);var s=n(1),o=n(3),a=n.n(o),c=n(2),l=n(6),u=n.n(l),p=n(4),d=n.n(p);const h="662092",f=function(){var e=r((function*(e){const t=s.app.getPath("userData"),n=a.a.resolve(t,".local-chromium");try{u.a.accessSync(n);const e=d.a.createBrowserFetcher({path:n});if((yield e.localRevisions()).length<1)return!1;const t=e.revisionInfo(h).executablePath,i=yield d.a.launch({executablePath:t,headless:!0}),r=yield i.newPage();return yield r.goto("http://example.com/"),yield i.close(),{success:!0,executablePath:t}}catch(e){return console.log("Error while testing browser."),console.log(e),u.a.removeSync(n),{success:!1,executablePath:"fail"}}}));return function(t){return e.apply(this,arguments)}}(),y=e=>{const t=a.a.resolve(s.app.getPath("userData"),".local-chromium"),n=d.a.createBrowserFetcher({path:t});let i=0;n.download(h,function(){var e=r((function*(e,t){const n={progress:Math.round(e/t*100),done:e===t};(n.progress>i||n.done)&&(i=n.progress,null==X||X.webContents.send("CHROMIUM_DOWNLOAD_PROGRESS",n))}));return function(t,n){return e.apply(this,arguments)}}())};var g=n(9),m=n.n(g),b=n(10),v=n.n(b);var w=function(){var e=r((function*(e,t=0){J.browserStateChange(e,!0);const n=s.app.getPath("userData"),i=d.a.createBrowserFetcher({path:a.a.resolve(n,".local-chromium")}).revisionInfo(h).executablePath,o=a.a.resolve(n,e),{width:c,height:l,deviceScaleFactor:u}=m.a["Pixel 2"].viewport;d.a.use(v()());const p=yield d.a.launch({headless:!1,devtools:!1,ignoreHTTPSErrors:!0,ignoreDefaultArgs:["--enable-automation"],args:["--disable-infobars","--no-first-run","--enable-features=NetworkService",`--user-data-dir=${o}`,`--window-size=${c},${l+82}`,`--window-position=${0+500*t},0`],executablePath:i}),f=yield p.newPage(),y=yield f.target().createCDPSession();return p.on("targetcreated",e=>{e.url().includes("devtools")}),y.send("Network.setUserAgentOverride",{userAgent:"Mozilla/5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3803.0 Mobile Safari/537.36",locale:"en-US,en",platform:"linux"}),yield Promise.all([y.send("Emulation.setDeviceMetricsOverride",{mobile:!0,width:c,height:l,deviceScaleFactor:u,screenOrientation:{angle:0,type:"portraitPrimary"}}),y.send("Emulation.setTouchEmulationEnabled",{enabled:!0}),y.send("Emulation.setEmitTouchEventsForMouse",{enabled:!0,configuration:"desktop"})]),f.on("close",r((function*(){yield p.close()}))),p.on("disconnected",r((function*(){J.browserStateChange(e,!1)}))),p}));return function(t){return e.apply(this,arguments)}}();const S=function(){var e=r((function*(e,t){const n=e.browser();e?(yield e.goto("https://accounts.google.com/signin/v2/identifier?flowName=GlifWebSignIn&flowEntry=ServiceLogin&hl=en"),e.on("load",r((function*(){if(!e.url().includes("https://myaccount.google.com/"))return;yield e.waitForXPath("//div[contains(text(),'@gmail.com')]");const i=yield e.$x("//div[contains(text(),'@gmail.com')]");if(i.length<1)return;const[r]=i,s=yield r.getProperty("innerText");let o=yield s.jsonValue();const a=yield J.getSameEmails(o);a&&a.length>0&&(o+=` (${a.length+1})`),J.setBrowserEmail(t,o),n.close()})))):n.close()}));return function(t,n){return e.apply(this,arguments)}}();var k=n(7),x=n(8),O=n.n(x),P=n(5),E=n(0);class T{constructor(){}static init(e){this.unsubscribeAll(),this.subscriptions=[];const t=Object(P.timer)(0,e).pipe(Object(E.switchMap)(()=>O.a.get("https://www.supremenewyork.com/shop.json",{transformResponse:e=>e})),Object(E.pluck)("data"),Object(E.retryWhen)(t=>t.pipe(Object(E.delay)(e)))),n=Object(P.timer)(e/2,e).pipe(Object(E.switchMap)(()=>O.a.get("https://www.supremenewyork.com/mobile_stock.json",{transformResponse:e=>e})),Object(E.pluck)("data"),Object(E.retryWhen)(t=>t.pipe(Object(E.delay)(e))));this.observable=Object(P.merge)(t,n).pipe(Object(E.distinctUntilChanged)(),Object(E.map)(e=>{const t=JSON.parse(e);if(t.error||!t.products_and_categories)throw new Error("Invalid response");return t}),Object(E.retryWhen)(t=>t.pipe(Object(E.delay)(e))),Object(E.shareReplay)({refCount:!0}))}static subscribe(e){const t=this.observable.subscribe(e);return this.subscriptions.push(t),t}static unsubscribeAll(){this.subscriptions.forEach(e=>e.unsubscribe())}}function j(e,t){return C.apply(this,arguments)}function C(){return(C=r((function*(e,t){const n=e.postData();if("http://127.0.0.1:2140/status.json"!==e.url()||!n)return;const i=JSON.parse(n);J.updateTaskStatus(t.task,i),"Sold out"===i.message&&(yield t.page.close(),yield t.page.browser().close())}))).apply(this,arguments)}let M;function D(e,t){return A.apply(this,arguments)}function A(){return(A=r((function*(e,t){const n=e.status(),i=e.url();if(/.*checkout.json$/.test(i)&&200!==n)return t.updateTaskStatus({message:`${n}. Retrying`,type:M.Error}),void(yield t.retry());if(200===n)if(/.*add.json$/.test(i)){const n=yield e.json();n.length>0?t.updateTaskStatus({message:"Added to cart",type:M.Action}):0===n.length&&(t.updateTaskStatus({message:"Size sold out",type:M.Error}),yield t.retry())}else if(/.*(checkout|status).json$/.test(i)){const n=yield e.json();switch(n.status){case"failed":case"404":case"500":case"outOfStock":{const e="outOfStock"===n.status?"Size sold out":"Failed. Retrying";return void t.updateTaskStatus({message:e,type:M.Error})}case"queued":return void t.updateTaskStatus({message:"Processing",type:M.Action});case"dup":return t.updateTaskStatus({message:"Duplicate order",type:M.Error}),yield t.page.close(),void(yield t.browser.close());case"paid":return t.updateTaskStatus({message:"Success",type:M.Success,additionalInfo:n.id}),yield t.page.close(),void(yield t.browser.close())}}}))).apply(this,arguments)}function _(e,t){return $.apply(this,arguments)}function $(){return($=r((function*(e,t=!0){yield this.page.waitForXPath(e,{visible:!0});const n=yield this.page.$x(e);let i=[];for(let e of n){const n=yield e.boundingBox(),r=yield e.isIntersectingViewport();null!==n&&r&&i.push(e),null===n||t||i.push(e)}return i[0]}))).apply(this,arguments)}function I({firstName:e,lastName:t,address1:n,address2:i,city:r,postcode:s,email:o,telephone:a}){return{name:"js-address",value:`${e} ${t}|${o}|${a}|${n}|${i}|${r}|undefined|${s}|PL|`.replace(/ /g,"%20").replace(/@/g,"%40"),domain:".supremenewyork.com"}}function R(e){return B.apply(this,arguments)}function B(){return(B=r((function*(){if(!this.profile)return;const e=yield this.page.cookies("https://www.supremenewyork.com/");yield this.page.deleteCookie(...e),yield this.page.setCookie(I(this.profile))}))).apply(this,arguments)}function L(e,t,n){return N.apply(this,arguments)}function N(){return(N=r((function*(e,t){yield this.page.waitForXPath(e,{visible:!0});const[n]=yield this.page.$x(e),i=yield n.getProperty("id"),r=yield i.jsonValue();yield this.page.select(`#${r}`,t)}))).apply(this,arguments)}T.observable=void 0,T.subscriptions=[],function(e){e.Inactive="Inactive",e.Action="Action",e.Success="Success",e.Error="Error"}(M||(M={}));const q=(e,t,n,i=!1,r=[])=>{let s=`//${e}[`;n=n.toLowerCase();for(let e of n)s+=` (contains(${t}, '${e}') or contains(${t}, '${e.toUpperCase()}')) and`;return s=s.slice(0,-4),r.forEach(e=>{e=e.toLowerCase(),s+=` and not(contains(${t}, '${e}')) and not(contains(${t}, '${e.toUpperCase()}'))`}),s+="]",i&&(s+="/parent::*"),s},W={addBtn:q("span","text()","add to",!1,["checkout","remove"]),addBtnDesktop:q("input","@value","add to",!1,["checkout","remove"]),checkoutBtn:q("span","text()","checkout",!0,["add","remove","basket"]),checkoutBtnDesktop:q("a","text()","checkout",!1,["add","remove","basket"]),cvv:q("input","@placeholder","cv",!1,["num","name"]),creditCardNumber:q("input","@placeholder","number",!1,["name","tel"]),termsLabel:q("label","text()","I have read")+"//preceding::input[@type='checkbox' and not(contains(@id, 'address'))]",processBtn:q("span","text()","process",!0,["cancel","edit"]),processBtnDesktop:q("input","@value","process",!1,["cancel","edit"])+"[@type='submit']",cardTypeSelect:"//option[contains(text(),'astercard')]/parent::*",monthSelect:"//option[contains(text(),'06')]/parent::*",yearSelect:"//option[contains(text(),'2021')]/parent::*",itemName:"//*[@class='name']",itemSelectable:"//*[@class='selectable']",price:"//*[@class='price']",recaptchaCSS:"*[name='g-recaptcha-response']"};function F(e){return U.apply(this,arguments)}function U(){return(U=r((function*(){var e,t,n;if(!(this.profile&&(null===(e=this.profile.month)||void 0===e?void 0:e.value)&&(null===(t=this.profile.year)||void 0===t?void 0:t.value)&&(null===(n=this.profile.creditCardType)||void 0===n?void 0:n.value)))return;const i=Date.now();yield this.page.waitForXPath(W.cardTypeSelect,{visible:!0,timeout:0}),this.updateTaskStatus({message:"Checking out",type:M.Action});const r=Date.now(),{creditCardType:s,month:o,year:a,creditCardNumber:c,cvv:l}=this.profile;yield this.selectOption(W.cardTypeSelect,s.value),yield this.selectOption(W.monthSelect,o.value),yield this.selectOption(W.yearSelect,a.value);const u=yield this.getVisibleElement(W.creditCardNumber);yield u.tap(),yield u.type(c);const p=yield this.getVisibleElement(W.cvv);yield p.tap(),yield p.type(l.toString());const d=yield this.getVisibleElement(W.termsLabel,!1);yield d.tap();const h=Date.now()-r.valueOf(),f="string"==typeof this.task.checkoutDelay?parseInt(this.task.checkoutDelay):this.task.checkoutDelay;if(h<f){this.updateTaskStatus({message:"Checkout delay",type:M.Action});const e=f-h;yield new Promise(t=>setTimeout(t,e))}const y=yield this.getVisibleElement(W.processBtn,!1);yield y.tap(),console.log(Date.now()-i),this.updateTaskStatus({message:"Waiting for response",type:M.Action})}))).apply(this,arguments)}function V(e){return z.apply(this,arguments)}function z(){return(z=r((function*(){this.updateTaskStatus({message:"Waiting for products",type:M.Action});try{yield this.page.goto("https://www.supremenewyork.com/mobile/#supplier",{timeout:3e3})}catch{return void(yield this.loadMainPage())}}))).apply(this,arguments)}var G=class{constructor(e,t,n){var i=this;this.page=e,this.task=t,this.product=n,this.browser=void 0,this.checkoutDelay=void 0,this.externalStock=null,this.profile=null,this.init=r((function*(){var e;T.subscribe(i.setStock),i.task.profile&&(i.profile=null!==(e=yield J.getProfile(i.task.profile.value))&&void 0!==e?e:null,i.page.on("request",e=>i.parseRequest(e,i)),i.page.on("response",e=>i.parseResponse(e,i)),i.page.on("load",()=>i.onLoad()),yield i.prepareCookies(),yield i.loadMainPage(),yield i.checkout())})),this.onLoad=r((function*(){try{if((yield i.page.evaluate("window.location.href")).includes("supplier")){const n=(e=i.product,t=i.externalStock,'(async()=>{localStorage.clear();if(typeof Supreme==="undefined")return await b();const p='+JSON.stringify(e)+";const q="+JSON.stringify(t)+String.fromCharCode(59,99,111,110,115,116,123,107,101,121,119,111,114,100,115,58,114,44,99,111,108,111,114,115,58,115,44,97,110,121,83,105,122,101,58,116,44,97,110,121,67,111,108,111,114,58,117,125,61,112,59,99,111,110,115,116,32,118,61,112,46,115,105,122,101,46,118,97,108,117,101,59,108,101,116,32,119,61,104,40,114,41,59,105,102,40,33,119,38,38,113,41,123,111,40,113,41,59,119,61,104,40,114,41,125,105,102,40,33,119,41,123,114,101,116,117,114,110,32,97,119,97,105,116,32,98,40,41,125,99,111,110,115,116,32,120,61,97,119,97,105,116,32,106,40,119,41,59,105,102,40,33,120,41,114,101,116,117,114,110,59,99,111,110,115,116,32,121,61,103,40,120,44,115,44,117,41,59,105,102,40,33,121,41,114,101,116,117,114,110,59,99,111,110,115,116,32,122,61,121,46,97,116,116,114,105,98,117,116,101,115,46,115,105,122,101,115,46,109,111,100,101,108,115,46,102,105,108,116,101,114,40,97,61,62,97,46,97,116,116,114,105,98,117,116,101,115,46,115,116,111,99,107,95,108,101,118,101,108,33,61,61,48,41,59,99,111,110,115,116,32,65,61,102,40,122,44,118,44,116,41,59,105,102,40,33,65,41,123,110,40,34,83,111,108,100,32,111,117,116,34,44,34,69,114,114,111,114,34,41,59,114,101,116,117,114,110,125,97,40,119,44,121,41,59,97,119,97,105,116,32,99,40,65,41,59,119,105,110,100,111,119,46,108,111,99,97,116,105,111,110,46,104,114,101,102,61,34,104,116,116,112,115,58,47,47,119,119,119,46,115,117,112,114,101,109,101,110,101,119,121,111,114,107,46,99,111,109,47,109,111,98,105,108,101,47,35,99,104,101,99,107,111,117,116,34,59,102,117,110,99,116,105,111,110,32,97,40,97,44,98,41,123,99,111,110,115,116,32,99,61,110,101,119,32,68,97,116,101,59,99,46,115,101,116,77,111,110,116,104,40,99,46,103,101,116,77,111,110,116,104,40,41,43,54,41,59,99,46,115,101,116,72,111,117,114,115,40,99,46,103,101,116,72,111,117,114,115,40,41,43,49,41,59,99,111,110,115,116,32,100,61,96,112,114,111,100,117,99,116,115,47,36,123,97,46,97,116,116,114,105,98,117,116,101,115,46,105,100,125,47,36,123,98,46,97,116,116,114,105,98,117,116,101,115,46,105,100,125,59,112,97,116,104,61,47,59,32,101,120,112,105,114,101,115,61,36,123,99,46,116,111,85,84,67,83,116,114,105,110,103,40,41,125,96,59,100,111,99,117,109,101,110,116,46,99,111,111,107,105,101,61,96,108,97,115,116,86,105,115,105,116,101,100,70,114,97,103,109,101,110,116,61,36,123,100,125,96,125,97,115,121,110,99,32,102,117,110,99,116,105,111,110,32,98,40,41,123,97,119,97,105,116,32,105,40,49,53,48,48,41,59,119,105,110,100,111,119,46,108,111,99,97,116,105,111,110,46,114,101,108,111,97,100,40,41,125,102,117,110,99,116,105,111,110,32,99,40,97,41,123,110,40,34,65,100,100,105,110,103,32,116,111,32,99,97,114,116,34,44,34,65,99,116,105,111,110,34,41,59,99,111,110,115,116,32,98,61,80,114,111,109,105,115,101,46,114,97,99,101,40,91,101,40,97,41,44,100,40,97,41,93,41,59,105,102,40,33,83,117,112,114,101,109,101,46,97,112,112,46,99,97,114,116,46,97,116,116,114,105,98,117,116,101,115,46,115,105,122,101,115,46,99,111,110,116,97,105,110,115,40,97,41,41,123,83,117,112,114,101,109,101,46,97,112,112,46,99,97,114,116,46,97,100,100,83,105,122,101,84,111,76,111,99,97,108,83,116,111,114,97,103,101,40,97,44,49,41,59,83,117,112,114,101,109,101,46,97,112,112,46,99,97,114,116,46,97,116,116,114,105,98,117,116,101,115,46,115,105,122,101,115,46,97,100,100,40,97,44,49,41,125,114,101,116,117,114,110,32,98,125,97,115,121,110,99,32,102,117,110,99,116,105,111,110,32,100,40,97,41,123,99,111,110,115,116,32,98,61,97,46,97,116,116,114,105,98,117,116,101,115,46,105,100,46,116,111,83,116,114,105,110,103,40,41,59,119,104,105,108,101,40,33,108,111,99,97,108,83,116,111,114,97,103,101,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,98,41,41,123,83,117,112,114,101,109,101,46,97,112,112,46,99,97,114,116,46,114,101,109,111,118,101,83,105,122,101,68,105,114,101,99,116,108,121,40,98,41,59,83,117,112,114,101,109,101,46,97,112,112,46,99,97,114,116,46,97,100,100,83,105,122,101,40,97,41,59,97,119,97,105,116,32,105,40,49,53,48,48,41,125,114,101,116,117,114,110,32,116,114,117,101,125,97,115,121,110,99,32,102,117,110,99,116,105,111,110,32,101,40,97,41,123,99,111,110,115,116,32,98,61,97,46,97,116,116,114,105,98,117,116,101,115,46,105,100,46,116,111,83,116,114,105,110,103,40,41,59,119,104,105,108,101,40,33,108,111,99,97,108,83,116,111,114,97,103,101,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,98,41,41,123,97,119,97,105,116,32,105,40,49,48,41,125,114,101,116,117,114,110,32,116,114,117,101,125,102,117,110,99,116,105,111,110,32,102,40,97,44,98,44,99,41,123,99,111,110,115,116,32,100,61,97,46,102,105,110,100,40,97,61,62,97,46,97,116,116,114,105,98,117,116,101,115,46,110,97,109,101,46,116,111,76,111,119,101,114,67,97,115,101,40,41,61,61,61,98,46,116,111,76,111,119,101,114,67,97,115,101,40,41,41,59,105,102,40,100,124,124,33,99,41,114,101,116,117,114,110,32,100,59,99,111,110,115,116,32,101,61,97,91,77,97,116,104,46,102,108,111,111,114,40,77,97,116,104,46,114,97,110,100,111,109,40,41,42,97,46,108,101,110,103,116,104,41,93,59,114,101,116,117,114,110,32,101,125,102,117,110,99,116,105,111,110,32,103,40,97,44,98,44,99,41,123,99,111,110,115,116,32,100,61,97,46,102,105,110,100,40,97,61,62,109,40,97,46,97,116,116,114,105,98,117,116,101,115,46,110,97,109,101,44,98,41,41,59,105,102,40,100,124,124,33,99,41,114,101,116,117,114,110,32,100,59,99,111,110,115,116,32,101,61,97,91,77,97,116,104,46,102,108,111,111,114,40,77,97,116,104,46,114,97,110,100,111,109,40,41,42,97,46,108,101,110,103,116,104,41,93,59,114,101,116,117,114,110,32,101,125,102,117,110,99,116,105,111,110,32,104,40,97,41,123,99,111,110,115,116,32,98,61,83,117,112,114,101,109,101,46,99,97,116,101,103,111,114,105,101,115,46,109,111,100,101,108,115,46,102,108,97,116,77,97,112,40,97,61,62,97,46,97,116,116,114,105,98,117,116,101,115,46,112,114,111,100,117,99,116,115,46,109,111,100,101,108,115,46,102,108,97,116,40,41,41,59,114,101,116,117,114,110,32,98,46,102,105,110,100,40,98,61,62,109,40,98,46,97,116,116,114,105,98,117,116,101,115,46,110,97,109,101,44,97,41,41,125,97,115,121,110,99,32,102,117,110,99,116,105,111,110,32,105,40,97,41,123,97,119,97,105,116,32,110,101,119,32,80,114,111,109,105,115,101,40,98,61,62,115,101,116,84,105,109,101,111,117,116,40,98,44,97,41,41,125,97,115,121,110,99,32,102,117,110,99,116,105,111,110,32,106,40,97,41,123,99,111,110,115,116,32,98,61,97,119,97,105,116,32,80,114,111,109,105,115,101,46,114,97,99,101,40,91,107,40,97,41,44,108,40,97,41,93,41,59,114,101,116,117,114,110,32,98,124,124,110,117,108,108,125,97,115,121,110,99,32,102,117,110,99,116,105,111,110,32,107,40,97,41,123,119,104,105,108,101,40,33,97,46,97,116,116,114,105,98,117,116,101,115,46,115,116,121,108,101,115,41,123,97,119,97,105,116,32,105,40,49,48,41,125,114,101,116,117,114,110,32,97,46,97,116,116,114,105,98,117,116,101,115,46,115,116,121,108,101,115,46,109,111,100,101,108,115,125,97,115,121,110,99,32,102,117,110,99,116,105,111,110,32,108,40,97,41,123,119,104,105,108,101,40,33,97,46,97,116,116,114,105,98,117,116,101,115,46,115,116,121,108,101,115,41,123,97,46,102,101,116,99,104,40,41,59,97,119,97,105,116,32,105,40,49,48,48,48,41,125,125,102,117,110,99,116,105,111,110,32,109,40,97,44,123,112,111,115,105,116,105,118,101,58,98,44,110,101,103,97,116,105,118,101,58,99,44,109,117,108,116,105,58,100,125,41,123,97,61,97,46,116,111,76,111,119,101,114,67,97,115,101,40,41,59,105,102,40,33,98,46,101,118,101,114,121,40,98,61,62,97,46,105,110,99,108,117,100,101,115,40,98,41,41,41,114,101,116,117,114,110,32,102,97,108,115,101,59,105,102,40,99,46,115,111,109,101,40,98,61,62,97,46,105,110,99,108,117,100,101,115,40,98,41,41,41,114,101,116,117,114,110,32,102,97,108,115,101,59,105,102,40,33,100,41,114,101,116,117,114,110,32,116,114,117,101,59,102,111,114,40,99,111,110,115,116,32,101,32,111,102,32,100,41,123,99,111,110,115,116,32,98,61,101,46,115,112,108,105,116,40,34,32,124,32,34,41,59,105,102,40,33,98,46,115,111,109,101,40,98,61,62,97,46,105,110,99,108,117,100,101,115,40,98,41,41,41,114,101,116,117,114,110,32,102,97,108,115,101,125,114,101,116,117,114,110,32,116,114,117,101,125,102,117,110,99,116,105,111,110,32,110,40,97,44,98,41,123,102,101,116,99,104,40,34,104,116,116,112,58,47,47,49,50,55,46,48,46,48,46,49,58,50,49,52,48,47,115,116,97,116,117,115,46,106,115,111,110,34,44,123,109,101,116,104,111,100,58,34,80,79,83,84,34,44,104,101,97,100,101,114,115,58,123,65,99,99,101,112,116,58,34,97,112,112,108,105,99,97,116,105,111,110,47,106,115,111,110,34,44,34,67,111,110,116,101,110,116,45,84,121,112,101,34,58,34,97,112,112,108,105,99,97,116,105,111,110,47,106,115,111,110,34,125,44,98,111,100,121,58,74,83,79,78,46,115,116,114,105,110,103,105,102,121,40,123,109,101,115,115,97,103,101,58,97,44,116,121,112,101,58,98,125,41,125,41,125,102,117,110,99,116,105,111,110,32,111,40,97,41,123,97,108,108,67,97,116,101,103,111,114,105,101,115,65,110,100,80,114,111,100,117,99,116,115,61,97,59,119,105,110,100,111,119,46,114,101,108,101,97,115,101,95,119,101,101,107,61,97,46,114,101,108,101,97,115,101,95,119,101,101,107,59,119,105,110,100,111,119,46,114,101,108,101,97,115,101,95,100,97,116,101,61,97,46,114,101,108,101,97,115,101,95,100,97,116,101,59,83,117,112,114,101,109,101,46,99,97,116,101,103,111,114,105,101,115,61,110,101,119,32,67,97,116,101,103,111,114,105,101,115,59,83,117,112,114,101,109,101,46,99,97,116,101,103,111,114,105,101,115,46,112,111,112,117,108,97,116,101,40,97,41,125,125,41,40,41,59));yield i.page.evaluate(n)}}catch{}var e,t})),this.updateTaskStatus=({message:e,type:t,additionalInfo:n})=>{J.updateTaskStatus(this.task,{message:e,type:t,additionalInfo:n})},this.retry=r((function*(){try{yield new Promise(e=>setTimeout(e,1e3)),yield i.prepareCookies(),yield i.loadMainPage(),yield i.page.reload(),yield i.checkout()}catch{}})),this.setStock=e=>{this.externalStock={...e}},this.parseRequest=j,this.parseResponse=D,this.getVisibleElement=_,this.prepareCookies=R,this.selectOption=L,this.checkout=F,this.loadMainPage=V,this.browser=this.page.browser(),this.checkoutDelay="string"==typeof this.task.checkoutDelay?parseInt(this.task.checkoutDelay):this.task.checkoutDelay}};class H{constructor(){this.browsers=[]}static getInstance(){var e;return this.instance=null!==(e=this.instance)&&void 0!==e?e:new H,this.instance}setup(e){var t=this;return r((function*(){try{const n=yield w(e.id);t.browsers.push(n);const i=yield n.pages(),r=k.last(i);if(!r)return void n.close();S(r,e.id)}catch{J.browserStateChange(e.id,!1)}}))()}startTasks(e){var t=this;return r((function*(){T.init(2e3),e.forEach(function(){var e=r((function*(e,n){var i;if(!e.browser)return;const r=yield w(null===(i=e.browser)||void 0===i?void 0:i.value,n),s=yield J.getProduct(e.products[0]);t.browsers.push(r);const o=yield r.pages(),a=k.last(o);if(a&&s)try{const t=new G(a,e,s);yield t.init()}catch{}}));return function(t,n){return e.apply(this,arguments)}}())}))()}stopAll(){var e=this;return r((function*(){T.unsubscribeAll();const t=[];e.browsers.forEach(n=>{n.isConnected()&&t.push(e.closeBrowser(n))}),e.browsers=[],yield Promise.all(t)}))()}closeBrowser(e){return r((function*(){for(let t of yield e.pages())yield t.close({runBeforeUnload:!0});yield e.close()}))()}}H.instance=void 0;var K=H;class J{constructor(){}}J.registerListeners=()=>{c.ipcMain.answerRenderer("VERIFY_CHROME",f),c.ipcMain.on("DOWNLOAD_CHROMIUM",y),c.ipcMain.on("SETUP_BROWSER",(e,t)=>K.getInstance().setup(t)),c.ipcMain.on("START_TASKS",(e,t)=>K.getInstance().startTasks(t)),c.ipcMain.on("STOP_TASKS",e=>K.getInstance().stopAll()),c.ipcMain.on("WINDOW_MINIMIZE",()=>null==X?void 0:X.minimize()),c.ipcMain.on("WINDOW_CLOSE",()=>null==X?void 0:X.close())},J.getProfile=function(){var e=r((function*(e){if(!X)return;return yield c.ipcMain.callRenderer(X,"GET_PROFILE",e)}));return function(t){return e.apply(this,arguments)}}(),J.getProduct=function(){var e=r((function*(e){if(!X)return;return yield c.ipcMain.callRenderer(X,"GET_PRODUCT",e)}));return function(t){return e.apply(this,arguments)}}(),J.updateTaskStatus=(e,t)=>{if(!X)return;const n={...e,status:t};X.webContents.send("UPDATE_TASK_STATUS",n)},J.getSameEmails=function(){var e=r((function*(e){if(!X)return;return yield c.ipcMain.callRenderer(X,"GET_SAME_EMAILS",e)}));return function(t){return e.apply(this,arguments)}}(),J.browserStateChange=(e,t)=>{null==X||X.webContents.send("BROWSER_STATE_CHANGE",{id:e,status:t})},J.setBrowserEmail=(e,t)=>{null==X||X.webContents.send("SET_BROWSER_EMAIL",{id:e,email:t})},n.d(t,"mainWindow",(function(){return X}));let X=null;const Y=()=>{const e={width:1200,height:750,frame:!1,show:!1,resizable:!1,maximizable:!1,fullscreenable:!1,titleBarStyle:"hiddenInset",webPreferences:{nodeIntegration:!1,preload:a.a.join(__dirname,"preload.js"),backgroundThrottling:!1}};X=new s.BrowserWindow(e);const t=`file://${a.a.join(__dirname,"../build/index.html")}`;X.loadURL(t),X.webContents.once("did-finish-load",()=>{X&&X.show()}),X.on("closed",()=>X=null)};s.app.on("ready",Y),s.app.on("window-all-closed",()=>{"darwin"!==process.platform&&s.app.quit()}),s.app.on("activate",()=>{null===X&&Y()}),J.registerListeners()}]);