!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=15)}([function(e,t){e.exports=require("electron")},function(e,t){e.exports=require("rxjs/operators")},function(e,t){e.exports=require("electron-better-ipc")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("electron-updater")},function(e,t){e.exports=require("puppeteer-extra")},function(e,t){e.exports=require("fs-extra")},function(e,t){e.exports=require("rxjs")},function(e,t){e.exports=require("ramda")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("moment")},function(e,t){e.exports=require("puppeteer/DeviceDescriptors")},function(e,t){e.exports=require("puppeteer-extra-plugin-stealth")},function(e,t){e.exports=require("discord-rpc")},function(e,t){e.exports=require("electron-devtools-installer")},function(e,t,n){"use strict";function r(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var s=e.apply(t,n);function a(e){r(s,i,o,a,c,"next",e)}function c(e){r(s,i,o,a,c,"throw",e)}a(void 0)}))}}n.r(t);var o=n(0),s=n(3),a=n.n(s),c=n(2),l=n(6),u=n.n(l),p=n(5),d=n.n(p);const h="686378",f=function(){var e=i((function*(e){const t=o.app.getPath("userData"),n=a.a.resolve(t,".local-chromium");try{u.a.accessSync(n);const e=d.a.createBrowserFetcher({path:n});if((yield e.localRevisions()).length<1)return!1;const t=e.revisionInfo(h).executablePath,r=yield d.a.launch({executablePath:t,headless:!0}),i=yield r.newPage();return yield i.goto("http://example.com/"),yield r.close(),{success:!0,executablePath:t,version:o.app.getVersion()}}catch(e){return console.log("Error while testing browser."),console.log(e),u.a.removeSync(n),{success:!1,executablePath:"fail",version:o.app.getVersion()}}}));return function(t){return e.apply(this,arguments)}}(),y=e=>{const t=a.a.resolve(o.app.getPath("userData"),".local-chromium"),n=d.a.createBrowserFetcher({path:t});let r=0;n.download(h,function(){var e=i((function*(e,t){const n={progress:Math.round(e/t*100),done:e===t};(n.progress>r||n.done)&&(r=n.progress,null==ie||ie.webContents.send("CHROMIUM_DOWNLOAD_PROGRESS",n))}));return function(t,n){return e.apply(this,arguments)}}())};var g=n(11),m=n.n(g),b=n(12),v=n.n(b);var w=function(){var e=i((function*(e,t=0){Y.browserStateChange(e,!0);const n=o.app.getPath("userData"),r=d.a.createBrowserFetcher({path:a.a.resolve(n,".local-chromium")}).revisionInfo(h).executablePath,s=a.a.resolve(n,e),{width:c,height:l,deviceScaleFactor:u}=m.a["Pixel 2"].viewport;d.a.use(v()());const p=yield d.a.launch({headless:!1,ignoreHTTPSErrors:!0,ignoreDefaultArgs:["--enable-automation"],args:["--no-sandbox","--disable-gpu","--disable-infobars","--disable-setuid-sandbox","--disable-dev-shm-usage","--ignore-certifcate-errors","--ignore-certifcate-errors-spki-list",`--user-data-dir=${s}`,`--window-size=${c},${l+82}`,`--window-position=${0+500*t},0`],executablePath:r}),f=yield p.newPage(),y=yield f.target().createCDPSession();return p.on("targetcreated",e=>{e.url().includes("devtools")}),y.send("Network.setUserAgentOverride",{userAgent:"Mozilla/5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3882.0 Mobile Safari/537.36",locale:"en-US,en",platform:"linux"}),yield Promise.all([y.send("Emulation.setDeviceMetricsOverride",{mobile:!0,width:c,height:l,deviceScaleFactor:u,screenOrientation:{angle:0,type:"portraitPrimary"}}),y.send("Emulation.setTouchEmulationEnabled",{enabled:!0}),y.send("Emulation.setEmitTouchEventsForMouse",{enabled:!0,configuration:"desktop"})]),f.on("close",i((function*(){yield p.close()}))),p.on("disconnected",i((function*(){Y.browserStateChange(e,!1)}))),p}));return function(t){return e.apply(this,arguments)}}();const k=function(){var e=i((function*(e,t){const n=e.browser();e?(yield e.goto("https://accounts.google.com/signin/v2/identifier?flowName=GlifWebSignIn&flowEntry=ServiceLogin&hl=en"),e.on("load",i((function*(){if(!e.url().includes("https://myaccount.google.com/"))return;yield e.waitForXPath("//div[contains(text(),'@gmail.com')]");const r=yield e.$x("//div[contains(text(),'@gmail.com')]");if(r.length<1)return;const[i]=r,o=yield i.getProperty("innerText");let s=yield o.jsonValue();const a=yield Y.getSameEmails(s);a&&a.length>0&&(s+=` (${a.length+1})`),Y.setBrowserEmail(t,s),n.close()})))):n.close()}));return function(t,n){return e.apply(this,arguments)}}();var S=n(8),O=n(9),E=n.n(O),C=n(7),T=n(1);class x{constructor(){}static init(e){this.unsubscribeAll(),this.subscriptions=[];const t=Object(C.timer)(0,e).pipe(Object(T.switchMap)(()=>E.a.get("https://www.supremenewyork.com/shop.json",{transformResponse:e=>e})),Object(T.pluck)("data"),Object(T.retryWhen)(t=>t.pipe(Object(T.delay)(e)))),n=Object(C.timer)(e/2,e).pipe(Object(T.switchMap)(()=>E.a.get("https://www.supremenewyork.com/mobile_stock.json",{transformResponse:e=>e})),Object(T.pluck)("data"),Object(T.retryWhen)(t=>t.pipe(Object(T.delay)(e))));this.observable=Object(C.merge)(t,n).pipe(Object(T.distinctUntilChanged)(),Object(T.map)(e=>{const t=JSON.parse(e);if(t.error||!t.products_and_categories)throw new Error("Invalid response");return t}),Object(T.retryWhen)(t=>t.pipe(Object(T.delay)(e))),Object(T.shareReplay)({refCount:!0}))}static subscribe(e){const t=this.observable.subscribe(e);return this.subscriptions.push(t),t}static unsubscribeAll(){this.subscriptions.forEach(e=>e.unsubscribe())}}function P(e,t){return A.apply(this,arguments)}function A(){return(A=i((function*(e,t){const n=e.postData();if(t.logger.reportRequest(e),"http://127.0.0.1:2140/status.json"!==e.url()||!n)return;const r=JSON.parse(n);if("ATC"===r.message)return yield t.checkout();Y.updateTaskStatus(t.task,r),"Sold out"===r.message&&(yield t.page.close(),yield t.page.browser().close())}))).apply(this,arguments)}let D;function j(e,t){return _.apply(this,arguments)}function _(){return(_=i((function*(e,t){const n=e.status(),r=e.url();if(t.logger.reportResponse(e),/.*checkout.json$/.test(r)&&200!==n)return t.updateTaskStatus({message:`${n}. Retrying`,type:D.Error}),void(yield t.retry());if(200===n)if(/.*add.json$/.test(r)){const n=yield e.json();n.length>0?t.updateTaskStatus({message:"Added to cart",type:D.Action}):0===n.length&&(t.updateTaskStatus({message:"Size sold out",type:D.Error}),yield t.retry())}else if(/.*(checkout|status).json$/.test(r)){const n=yield e.json();switch(n.status){case"failed":case"404":case"500":case"outOfStock":{const e="outOfStock"===n.status?"Size sold out":"Failed. Retrying";return t.updateTaskStatus({message:e,type:D.Error}),void(yield t.retry())}case"queued":return void t.updateTaskStatus({message:"Processing",type:D.Action});case"dup":return t.updateTaskStatus({message:"Duplicate order",type:D.Error}),yield t.page.close(),void(yield t.browser.close());case"paid":return t.updateTaskStatus({message:"Success",type:D.Success,additionalInfo:n.id}),yield t.page.close(),void(yield t.browser.close())}}}))).apply(this,arguments)}function R(e,t){return M.apply(this,arguments)}function M(){return(M=i((function*(e,t=!0){yield this.page.waitForXPath(e,{visible:!0});const n=yield this.page.$x(e);let r=[];for(let e of n){const n=yield e.boundingBox(),i=yield e.isIntersectingViewport();null!==n&&i&&r.push(e),null===n||t||r.push(e)}return r[0]}))).apply(this,arguments)}function I({firstName:e,lastName:t,address1:n,address2:r,city:i,postcode:o,email:s,telephone:a}){return{name:"js-address",value:`${e} ${t}|${s}|${a}|${n}|${r}|${i}|undefined|${o}|PL|`.replace(/ /g,"%20").replace(/@/g,"%40"),domain:".supremenewyork.com"}}function U(e){return $.apply(this,arguments)}function $(){return($=i((function*(){if(!this.profile)return;const e=yield this.page.cookies("https://www.supremenewyork.com/");yield this.page.deleteCookie(...e),yield this.page.setCookie(I(this.profile)),this.logger.writeObject({message:"Prepared cookies!"})}))).apply(this,arguments)}function L(e,t,n){return N.apply(this,arguments)}function N(){return(N=i((function*(e,t){yield this.page.waitForXPath(e,{visible:!0});const[n]=yield this.page.$x(e),r=yield n.getProperty("id"),i=yield r.jsonValue();yield this.page.select(`#${i}`,t)}))).apply(this,arguments)}x.observable=void 0,x.subscriptions=[],function(e){e.Inactive="Inactive",e.Action="Action",e.Success="Success",e.Error="Error"}(D||(D={}));const q=(e,t,n,r=!1,i=[])=>{let o=`//${e}[`;n=n.toLowerCase();for(let e of n)o+=` (contains(${t}, '${e}') or contains(${t}, '${e.toUpperCase()}')) and`;return o=o.slice(0,-4),i.forEach(e=>{e=e.toLowerCase(),o+=` and not(contains(${t}, '${e}')) and not(contains(${t}, '${e.toUpperCase()}'))`}),o+="]",r&&(o+="/parent::*"),o},B={addBtn:q("span","text()","add to",!1,["checkout","remove"]),addBtnDesktop:q("input","@value","add to",!1,["checkout","remove"]),checkoutBtn:q("span","text()","checkout",!0,["add","remove","basket"]),checkoutBtnDesktop:q("a","text()","checkout",!1,["add","remove","basket"]),cvv:q("input","@placeholder","cv",!1,["num","name"]),creditCardNumber:q("input","@placeholder","number",!1,["name","tel"]),termsLabel:q("label","text()","I have read")+"//preceding::input[@type='checkbox' and not(contains(@id, 'address'))]",processBtn:q("span","text()","process",!0,["cancel","edit"]),processBtnDesktop:q("input","@value","process",!1,["cancel","edit"])+"[@type='submit']",cardTypeSelect:"//option[contains(text(),'astercard')]/parent::*",monthSelect:"//option[contains(text(),'06')]/parent::*",yearSelect:"//option[contains(text(),'2021')]/parent::*",itemName:"//*[@class='name']",itemSelectable:"//*[@class='selectable']",price:"//*[@class='price']",recaptchaCSS:"*[name='g-recaptcha-response']"};function W(e){return V.apply(this,arguments)}function V(){return(V=i((function*(){var e,t,n;if(!(this.profile&&(null===(e=this.profile.month)||void 0===e?void 0:e.value)&&(null===(t=this.profile.year)||void 0===t?void 0:t.value)&&(null===(n=this.profile.creditCardType)||void 0===n?void 0:n.value)))return;const r=yield this.getVisibleElement(B.checkoutBtn);yield r.tap(),yield this.page.waitForXPath(B.cardTypeSelect,{visible:!0,timeout:0}),this.updateTaskStatus({message:"Checking out",type:D.Action});const i=Date.now(),{creditCardType:o,month:s,year:a,creditCardNumber:c,cvv:l}=this.profile;yield this.selectOption(B.cardTypeSelect,o.value),yield this.selectOption(B.monthSelect,s.value),yield this.selectOption(B.yearSelect,a.value);const u=yield this.getVisibleElement(B.creditCardNumber);yield u.tap(),yield u.type(c);const p=yield this.getVisibleElement(B.cvv);yield p.tap(),yield p.type(l.toString());const d=yield this.getVisibleElement(B.termsLabel,!1);yield d.tap();const h=Date.now()-i.valueOf(),f="string"==typeof this.task.checkoutDelay?parseInt(this.task.checkoutDelay):this.task.checkoutDelay;if(h<f){this.updateTaskStatus({message:"Checkout delay",type:D.Action});const e=f-h;yield new Promise(t=>setTimeout(t,e))}yield this.page.evaluate("(() => {\n        return new Promise((res, rej) => {\n            (function waitTicket() {\n                let cookieObj = {};\n                document.cookie.split(';').forEach(each => {\n                    if (each.includes('=')) cookieObj[each.split('=')[0].trim()] = each.split('=')[1].trim()\n                })\n                if (cookieObj['ticket'] && cookieObj['_ticket']) {\n                    if (parseInt(cookieObj['_ticket'].substr(cookieObj['_ticket'].length - 10)) > parseInt(cookieObj['ticket'].substr(cookieObj['ticket'].length - 10))) {\n                        try {\n                          document.querySelector('#mobile_checkout_form').setAttribute('data-credit_verified', 1);\n                        } catch {}\n                        res();\n                    } else {\n                        setTimeout(waitTicket, 100);\n                    }\n                } else {\n                    res();\n                }\n            })();\n        });\n    })();\n");const y=yield this.getVisibleElement(B.processBtn,!1);yield y.tap(),this.updateTaskStatus({message:"Waiting for response",type:D.Action})}))).apply(this,arguments)}function F(e){return G.apply(this,arguments)}function G(){return(G=i((function*(){this.updateTaskStatus({message:"Waiting for products",type:D.Action});try{yield this.page.goto("https://www.supremenewyork.com/mobile/",{timeout:3e3}),this.logger.writeString("Loaded main page!")}catch{return void(yield this.loadMainPage())}}))).apply(this,arguments)}var H=n(10),z=n.n(H);class K{constructor(e,t){var n=this;this.id=e,this.page=t,this.stream=void 0,this.reportRequest=e=>{e.url(),e.postData(),e.headers()["content-type"]},this.reportResponse=function(){var e=i((function*(e){e.url()}));return function(t){return e.apply(this,arguments)}}(),this.writeObject=function(){var e=i((function*(e,t=!0){if(e.time=z()().format("kk:mm:ss:SSS"),t){const t=yield n.page.cookies("https://www.supremenewyork.com/"),r=["_utm","js-address","mixpanel"];e.cookies=t.filter(({name:e})=>!r.some(t=>e.includes(t)))}try{n.stream.write("\n"+JSON.stringify(e,null,1))}catch{}}));return function(t){return e.apply(this,arguments)}}(),this.writeString=(e,t=!0)=>{this.writeObject({message:e},t)},this.stream=u.a.createWriteStream(`${o.app.getAppPath()}/logs/${this.id}${z()().format("-kk-mm-ss")}.log`)}}var X=class{constructor(e,t,n){var r=this;this.page=e,this.task=t,this.product=n,this.browser=void 0,this.checkoutDelay=void 0,this.externalStock=null,this.profile=null,this.logger=void 0,this.init=i((function*(){var e;x.subscribe(r.setStock),r.task.profile&&(r.profile=null!==(e=yield Y.getProfile(r.task.profile.value))&&void 0!==e?e:null,r.page.on("request",e=>r.parseRequest(e,r)),r.page.on("response",e=>r.parseResponse(e,r)),r.page.on("load",()=>r.onLoad()),r.logger.writeString("Started fast task!"),yield r.prepareCookies(),yield r.loadMainPage())})),this.onLoad=i((function*(){try{if(!(yield r.page.evaluate("window.location.href")).includes("#checkout")){const n=(e=r.product,t=r.externalStock,'(async()=>{localStorage.clear();if(typeof Supreme==="undefined")return await a();const o='+JSON.stringify(e)+";const p="+JSON.stringify(t)+String.fromCharCode(59,99,111,110,115,116,123,107,101,121,119,111,114,100,115,58,113,44,99,111,108,111,114,115,58,114,44,97,110,121,83,105,122,101,58,115,44,97,110,121,67,111,108,111,114,58,116,125,61,111,59,99,111,110,115,116,32,117,61,111,46,115,105,122,101,46,118,97,108,117,101,59,108,101,116,32,118,61,103,40,113,41,59,105,102,40,33,118,38,38,112,41,123,110,40,112,41,59,118,61,103,40,113,41,125,105,102,40,33,118,41,123,114,101,116,117,114,110,32,97,119,97,105,116,32,97,40,41,125,99,111,110,115,116,32,119,61,97,119,97,105,116,32,105,40,118,41,59,105,102,40,33,119,41,114,101,116,117,114,110,59,99,111,110,115,116,32,120,61,102,40,119,44,114,44,116,41,59,105,102,40,33,120,41,114,101,116,117,114,110,59,99,111,110,115,116,32,121,61,120,46,97,116,116,114,105,98,117,116,101,115,46,115,105,122,101,115,46,109,111,100,101,108,115,46,102,105,108,116,101,114,40,97,61,62,97,46,97,116,116,114,105,98,117,116,101,115,46,115,116,111,99,107,95,108,101,118,101,108,33,61,61,48,41,59,99,111,110,115,116,32,122,61,101,40,121,44,117,44,115,41,59,105,102,40,33,122,41,123,109,40,34,83,111,108,100,32,111,117,116,34,44,34,69,114,114,111,114,34,41,59,114,101,116,117,114,110,125,97,119,97,105,116,32,98,40,122,41,59,97,119,97,105,116,32,104,40,50,53,48,41,59,109,40,34,65,84,67,34,44,34,65,99,116,105,111,110,34,41,59,97,115,121,110,99,32,102,117,110,99,116,105,111,110,32,97,40,41,123,97,119,97,105,116,32,104,40,49,53,48,48,41,59,119,105,110,100,111,119,46,108,111,99,97,116,105,111,110,46,114,101,108,111,97,100,40,41,125,97,115,121,110,99,32,102,117,110,99,116,105,111,110,32,98,40,97,41,123,109,40,34,65,100,100,105,110,103,32,116,111,32,99,97,114,116,34,44,34,65,99,116,105,111,110,34,41,59,99,111,110,115,116,32,98,61,97,119,97,105,116,32,80,114,111,109,105,115,101,46,114,97,99,101,40,91,100,40,97,41,44,99,40,97,41,93,41,59,105,102,40,33,83,117,112,114,101,109,101,46,97,112,112,46,99,97,114,116,46,97,116,116,114,105,98,117,116,101,115,46,115,105,122,101,115,46,99,111,110,116,97,105,110,115,40,97,41,41,123,83,117,112,114,101,109,101,46,97,112,112,46,99,97,114,116,46,97,100,100,83,105,122,101,84,111,76,111,99,97,108,83,116,111,114,97,103,101,40,97,44,49,41,59,83,117,112,114,101,109,101,46,97,112,112,46,99,97,114,116,46,97,116,116,114,105,98,117,116,101,115,46,115,105,122,101,115,46,97,100,100,40,97,44,49,41,125,115,101,116,83,101,115,115,105,111,110,73,68,115,40,41,59,114,101,116,117,114,110,32,98,125,97,115,121,110,99,32,102,117,110,99,116,105,111,110,32,99,40,97,41,123,99,111,110,115,116,32,98,61,97,46,97,116,116,114,105,98,117,116,101,115,46,105,100,46,116,111,83,116,114,105,110,103,40,41,59,119,104,105,108,101,40,33,108,111,99,97,108,83,116,111,114,97,103,101,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,98,41,41,123,83,117,112,114,101,109,101,46,97,112,112,46,99,97,114,116,46,114,101,109,111,118,101,83,105,122,101,68,105,114,101,99,116,108,121,40,98,41,59,83,117,112,114,101,109,101,46,97,112,112,46,99,97,114,116,46,97,100,100,83,105,122,101,40,97,41,59,97,119,97,105,116,32,104,40,49,53,48,48,41,125,114,101,116,117,114,110,32,116,114,117,101,125,97,115,121,110,99,32,102,117,110,99,116,105,111,110,32,100,40,97,41,123,99,111,110,115,116,32,98,61,97,46,97,116,116,114,105,98,117,116,101,115,46,105,100,46,116,111,83,116,114,105,110,103,40,41,59,119,104,105,108,101,40,33,108,111,99,97,108,83,116,111,114,97,103,101,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,98,41,41,123,97,119,97,105,116,32,104,40,49,48,41,125,114,101,116,117,114,110,32,116,114,117,101,125,102,117,110,99,116,105,111,110,32,101,40,97,44,98,44,99,41,123,99,111,110,115,116,32,100,61,97,46,102,105,110,100,40,97,61,62,97,46,97,116,116,114,105,98,117,116,101,115,46,110,97,109,101,46,116,111,76,111,119,101,114,67,97,115,101,40,41,61,61,61,98,46,116,111,76,111,119,101,114,67,97,115,101,40,41,41,59,105,102,40,100,124,124,33,99,41,114,101,116,117,114,110,32,100,59,99,111,110,115,116,32,101,61,97,91,77,97,116,104,46,102,108,111,111,114,40,77,97,116,104,46,114,97,110,100,111,109,40,41,42,97,46,108,101,110,103,116,104,41,93,59,114,101,116,117,114,110,32,101,125,102,117,110,99,116,105,111,110,32,102,40,97,44,98,44,99,41,123,99,111,110,115,116,32,100,61,97,46,102,105,110,100,40,97,61,62,108,40,97,46,97,116,116,114,105,98,117,116,101,115,46,110,97,109,101,44,98,41,41,59,105,102,40,100,124,124,33,99,41,114,101,116,117,114,110,32,100,59,99,111,110,115,116,32,101,61,97,91,77,97,116,104,46,102,108,111,111,114,40,77,97,116,104,46,114,97,110,100,111,109,40,41,42,97,46,108,101,110,103,116,104,41,93,59,114,101,116,117,114,110,32,101,125,102,117,110,99,116,105,111,110,32,103,40,97,41,123,99,111,110,115,116,32,98,61,83,117,112,114,101,109,101,46,99,97,116,101,103,111,114,105,101,115,46,109,111,100,101,108,115,46,102,108,97,116,77,97,112,40,97,61,62,97,46,97,116,116,114,105,98,117,116,101,115,46,112,114,111,100,117,99,116,115,46,109,111,100,101,108,115,46,102,108,97,116,40,41,41,59,114,101,116,117,114,110,32,98,46,102,105,110,100,40,98,61,62,108,40,98,46,97,116,116,114,105,98,117,116,101,115,46,110,97,109,101,44,97,41,41,125,97,115,121,110,99,32,102,117,110,99,116,105,111,110,32,104,40,97,41,123,97,119,97,105,116,32,110,101,119,32,80,114,111,109,105,115,101,40,98,61,62,115,101,116,84,105,109,101,111,117,116,40,98,44,97,41,41,125,97,115,121,110,99,32,102,117,110,99,116,105,111,110,32,105,40,97,41,123,99,111,110,115,116,32,98,61,97,119,97,105,116,32,80,114,111,109,105,115,101,46,114,97,99,101,40,91,106,40,97,41,44,107,40,97,41,93,41,59,114,101,116,117,114,110,32,98,124,124,110,117,108,108,125,97,115,121,110,99,32,102,117,110,99,116,105,111,110,32,106,40,97,41,123,119,104,105,108,101,40,33,97,46,97,116,116,114,105,98,117,116,101,115,46,115,116,121,108,101,115,41,123,97,119,97,105,116,32,104,40,49,48,41,125,114,101,116,117,114,110,32,97,46,97,116,116,114,105,98,117,116,101,115,46,115,116,121,108,101,115,46,109,111,100,101,108,115,125,97,115,121,110,99,32,102,117,110,99,116,105,111,110,32,107,40,97,41,123,119,104,105,108,101,40,33,97,46,97,116,116,114,105,98,117,116,101,115,46,115,116,121,108,101,115,41,123,97,46,102,101,116,99,104,40,41,59,97,119,97,105,116,32,104,40,49,48,48,48,41,125,125,102,117,110,99,116,105,111,110,32,108,40,97,44,123,112,111,115,105,116,105,118,101,58,98,44,110,101,103,97,116,105,118,101,58,99,44,109,117,108,116,105,58,100,125,41,123,97,61,97,46,116,111,76,111,119,101,114,67,97,115,101,40,41,59,105,102,40,33,98,46,101,118,101,114,121,40,98,61,62,97,46,105,110,99,108,117,100,101,115,40,98,41,41,41,114,101,116,117,114,110,32,102,97,108,115,101,59,105,102,40,99,46,115,111,109,101,40,98,61,62,97,46,105,110,99,108,117,100,101,115,40,98,41,41,41,114,101,116,117,114,110,32,102,97,108,115,101,59,105,102,40,33,100,41,114,101,116,117,114,110,32,116,114,117,101,59,102,111,114,40,99,111,110,115,116,32,101,32,111,102,32,100,41,123,99,111,110,115,116,32,98,61,101,46,115,112,108,105,116,40,34,32,124,32,34,41,59,105,102,40,33,98,46,115,111,109,101,40,98,61,62,97,46,105,110,99,108,117,100,101,115,40,98,41,41,41,114,101,116,117,114,110,32,102,97,108,115,101,125,114,101,116,117,114,110,32,116,114,117,101,125,102,117,110,99,116,105,111,110,32,109,40,97,44,98,41,123,102,101,116,99,104,40,34,104,116,116,112,58,47,47,49,50,55,46,48,46,48,46,49,58,50,49,52,48,47,115,116,97,116,117,115,46,106,115,111,110,34,44,123,109,101,116,104,111,100,58,34,80,79,83,84,34,44,104,101,97,100,101,114,115,58,123,65,99,99,101,112,116,58,34,97,112,112,108,105,99,97,116,105,111,110,47,106,115,111,110,34,44,34,67,111,110,116,101,110,116,45,84,121,112,101,34,58,34,97,112,112,108,105,99,97,116,105,111,110,47,106,115,111,110,34,125,44,98,111,100,121,58,74,83,79,78,46,115,116,114,105,110,103,105,102,121,40,123,109,101,115,115,97,103,101,58,97,44,116,121,112,101,58,98,125,41,125,41,125,102,117,110,99,116,105,111,110,32,110,40,97,41,123,97,108,108,67,97,116,101,103,111,114,105,101,115,65,110,100,80,114,111,100,117,99,116,115,61,97,59,119,105,110,100,111,119,46,114,101,108,101,97,115,101,95,119,101,101,107,61,97,46,114,101,108,101,97,115,101,95,119,101,101,107,59,119,105,110,100,111,119,46,114,101,108,101,97,115,101,95,100,97,116,101,61,97,46,114,101,108,101,97,115,101,95,100,97,116,101,59,83,117,112,114,101,109,101,46,99,97,116,101,103,111,114,105,101,115,61,110,101,119,32,67,97,116,101,103,111,114,105,101,115,59,83,117,112,114,101,109,101,46,99,97,116,101,103,111,114,105,101,115,46,112,111,112,117,108,97,116,101,40,97,41,125,125,41,40,41,59));yield r.page.evaluate(n)}}catch{}var e,t})),this.updateTaskStatus=({message:e,type:t,additionalInfo:n})=>{Y.updateTaskStatus(this.task,{message:e,type:t,additionalInfo:n})},this.retry=i((function*(){try{yield new Promise(e=>setTimeout(e,1e3)),yield r.prepareCookies(),yield r.loadMainPage(),yield r.page.reload()}catch{}})),this.setStock=e=>{this.externalStock={...e}},this.parseRequest=P,this.parseResponse=j,this.getVisibleElement=R,this.prepareCookies=U,this.selectOption=L,this.checkout=W,this.loadMainPage=F,this.logger=new K(t.id,e),this.browser=this.page.browser(),this.checkoutDelay="string"==typeof this.task.checkoutDelay?parseInt(this.task.checkoutDelay):this.task.checkoutDelay}};class J{constructor(){this.browsers=[]}static getInstance(){var e;return this.instance=null!==(e=this.instance)&&void 0!==e?e:new J,this.instance}setup(e){var t=this;return i((function*(){try{const n=yield w(e.id);t.browsers.push(n);const r=yield n.pages(),i=S.last(r);if(!i)return void n.close();k(i,e.id)}catch{Y.browserStateChange(e.id,!1)}}))()}startTasks(e){var t=this;return i((function*(){yield u.a.ensureDir(a.a.resolve(o.app.getAppPath(),"logs")),x.init(2e3),e.forEach(function(){var e=i((function*(e,n){var r;if(!e.browser)return;const i=yield w(null===(r=e.browser)||void 0===r?void 0:r.value,n),o=yield Y.getProduct(e.products[0]);t.browsers.push(i);const s=yield i.pages(),a=S.last(s);if(a&&o)try{const t=new X(a,e,o);yield t.init()}catch{}}));return function(t,n){return e.apply(this,arguments)}}())}))()}stopAll(){var e=this;return i((function*(){x.unsubscribeAll();const t=[];e.browsers.forEach(n=>{n.isConnected()&&t.push(e.closeBrowser(n))}),e.browsers=[],yield Promise.all(t)}))()}closeBrowser(e){return i((function*(){for(let t of yield e.pages())yield t.close({runBeforeUnload:!0});yield e.close()}))()}}J.instance=void 0;var Z=J,Q=n(4);class Y{constructor(){}}Y.registerListeners=()=>{c.ipcMain.answerRenderer("VERIFY_CHROME",f),c.ipcMain.on("DOWNLOAD_CHROMIUM",y),c.ipcMain.on("SETUP_BROWSER",(e,t)=>Z.getInstance().setup(t)),c.ipcMain.on("START_TASKS",(e,t)=>Z.getInstance().startTasks(t)),c.ipcMain.on("STOP_TASKS",e=>Z.getInstance().stopAll()),c.ipcMain.on("WINDOW_MINIMIZE",()=>null==ie?void 0:ie.minimize()),c.ipcMain.on("WINDOW_CLOSE",()=>null==ie?void 0:ie.close()),c.ipcMain.on("DOWNLOAD_UPDATE",()=>{Q.autoUpdater.downloadUpdate()}),c.ipcMain.on("RELAUNCH",()=>{o.app.relaunch(),o.app.exit()})},Y.setupUpdater=i((function*(){Q.autoUpdater.autoDownload=!1,Q.autoUpdater.on("update-available",e=>{null==ie||ie.webContents.send("UPDATE_AVAILABLE",e)}),Q.autoUpdater.on("error",e=>{null==ie||ie.webContents.send("UPDATE_DOWNLOAD_ERROR",e)}),Q.autoUpdater.signals.progress(e=>{null==ie||ie.webContents.send("UPDATE_DOWNLOAD_PROGRESS",e)}),Q.autoUpdater.signals.updateDownloaded(e=>{null==ie||ie.webContents.send("UPDATE_DOWNLOADED",e),Q.autoUpdater.quitAndInstall()}),yield Q.autoUpdater.checkForUpdates(),setInterval(()=>Q.autoUpdater.checkForUpdates(),3e5)})),Y.getProfile=function(){var e=i((function*(e){if(!ie)return;return yield c.ipcMain.callRenderer(ie,"GET_PROFILE",e)}));return function(t){return e.apply(this,arguments)}}(),Y.getProduct=function(){var e=i((function*(e){if(!ie)return;return yield c.ipcMain.callRenderer(ie,"GET_PRODUCT",e)}));return function(t){return e.apply(this,arguments)}}(),Y.updateTaskStatus=(e,t)=>{if(!ie)return;const n={...e,status:t};ie.webContents.send("UPDATE_TASK_STATUS",n)},Y.getSameEmails=function(){var e=i((function*(e){if(!ie)return;return yield c.ipcMain.callRenderer(ie,"GET_SAME_EMAILS",e)}));return function(t){return e.apply(this,arguments)}}(),Y.browserStateChange=(e,t)=>{null==ie||ie.webContents.send("BROWSER_STATE_CHANGE",{id:e,status:t})},Y.setBrowserEmail=(e,t)=>{null==ie||ie.webContents.send("SET_BROWSER_EMAIL",{id:e,email:t})},Y.reportCheckout=()=>{null==ie||ie.webContents.send("REPORT_CHECKOUT")};const ee=o.Menu.buildFromTemplate([{label:"Application",submenu:[{label:"About Application",role:"about"},{type:"separator"},{label:"Quit",accelerator:"Command+Q",click:()=>o.app.quit()}]},{label:"Edit",submenu:[{label:"Undo",accelerator:"CmdOrCtrl+Z",role:"undo"},{label:"Redo",accelerator:"Shift+CmdOrCtrl+Z",role:"redo"},{type:"separator"},{label:"Cut",accelerator:"CmdOrCtrl+X",role:"cut"},{label:"Copy",accelerator:"CmdOrCtrl+C",role:"copy"},{label:"Paste",accelerator:"CmdOrCtrl+V",role:"paste"},{label:"Select All",accelerator:"CmdOrCtrl+A",role:"selectAll"}]}]);const te=new(n(13).Client)({transport:"ipc"}),ne=function(){var e=i((function*(){try{yield te.login({clientId:"696377645285507183"})}catch{return}te.setActivity({details:`Version ${re?"dev":o.app.getVersion()}`,startTimestamp:Date.now(),largeImageKey:"logo",instance:!0})}));return function(){return e.apply(this,arguments)}}();n.d(t,"isDev",(function(){return re})),n.d(t,"mainWindow",(function(){return ie}));const re=!1;let ie=null;const oe=function(){var e=i((function*(){const e=n(14),t=["REACT_DEVELOPER_TOOLS","REDUX_DEVTOOLS"],r=!!process.env.UPGRADE_EXTENSIONS;for(const n of t)try{yield e.default(e[n],r)}catch(e){console.log(`Error installing ${n} extension: ${e.message}`)}}));return function(){return e.apply(this,arguments)}}(),se=()=>{re&&oe();const e={width:1200,height:750,frame:!1,show:!1,resizable:!1,maximizable:!1,fullscreenable:!1,titleBarStyle:"hiddenInset",webPreferences:{nodeIntegration:re,preload:re?void 0:a.a.join(__dirname,"preload.js"),backgroundThrottling:!1}};ie=new o.BrowserWindow(e);const t=re?"http://localhost:3000":`file://${a.a.join(__dirname,"../build/index.html")}`;ie.loadURL(t),ie.once("ready-to-show",()=>{var e;ne(),null===(e=ie)||void 0===e||e.show()}),ie.webContents.once("did-finish-load",()=>{ie&&re&&(ie.webContents.openDevTools(),ie.webContents.on("context-menu",(e,t)=>{o.Menu.buildFromTemplate([{label:"Inspect element",click:()=>{ie.inspectElement(t.x,t.y)}}]).popup(ie)}))}),ie.on("closed",()=>ie=null)};o.app.whenReady().then(se),o.Menu.setApplicationMenu(ee),o.powerSaveBlocker.start("prevent-display-sleep"),o.app.on("window-all-closed",()=>{"darwin"!==process.platform&&o.app.quit()}),o.app.on("activate",()=>{null===ie&&se()}),Y.registerListeners(),re||Y.setupUpdater()}]);