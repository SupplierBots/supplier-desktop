!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=15)}([function(e,t){e.exports=require("electron")},function(e,t){e.exports=require("moment")},function(e,t){e.exports=require("electron-better-ipc")},function(e,t){e.exports=require("lodash")},function(e,t){e.exports=require("electron-updater")},function(e,t){e.exports=require("chrome-launcher")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("playwright-core")},function(e,t){e.exports=require("discord.js")},function(e,t){e.exports=require("secret-agent")},function(e,t){e.exports=require("electron-devtools-installer")},function(e,t){e.exports=require("@secret-agent/puppet/lib/EngineFetcher")},function(e,t){e.exports=require("@secret-agent/puppet/lib/validateHostDependencies")},function(e,t){e.exports=require("discord-rpc")},function(e,t){e.exports=require("axios")},function(e,t,n){"use strict";function i(e,t,n,i,r,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(i,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var o=e.apply(t,n);function a(e){i(o,r,s,a,l,"next",e)}function l(e){i(o,r,s,a,l,"throw",e)}a(void 0)}))}}n.r(t),n.d(t,"isDev",(function(){return ve})),n.d(t,"mainWindow",(function(){return Se}));var s=n(0),o=n(6),a=n.n(o),l=n(2),u=n(4),c=n(11),d=n(12),p=n(5);let h;!function(e){e.Inactive="Inactive",e.Action="Action",e.Success="Success",e.Error="Error"}(h||(h={}));var y=n(1),f=n.n(y);const m=e=>String.fromCharCode(60,33,68,79,67,84,89,80,69,32,104,116,109,108,62,10,60,104,116,109,108,32,108,97,110,103,61,34,101,110,34,62,10,32,32,60,104,101,97,100,62,10,32,32,32,32,60,109,101,116,97,32,99,104,97,114,115,101,116,61,34,85,84,70,45,56,34,32,47,62,10,32,32,32,32,60,109,101,116,97,32,110,97,109,101,61,34,118,105,101,119,112,111,114,116,34,32,99,111,110,116,101,110,116,61,34,119,105,100,116,104,61,100,101,118,105,99,101,45,119,105,100,116,104,44,32,105,110,105,116,105,97,108,45,115,99,97,108,101,61,48,46,55,34,32,47,62,10,32,32,32,32,60,116,105,116,108,101,62,67,97,112,116,99,104,97,32,72,97,114,118,101,115,116,101,114,60,47,116,105,116,108,101,62,10,32,32,32,32,60,115,99,114,105,112,116,10,32,32,32,32,32,32,115,114,99,61,34,104,116,116,112,115,58,47,47,119,119,119,46,103,111,111,103,108,101,46,99,111,109,47,114,101,99,97,112,116,99,104,97,47,97,112,105,46,106,115,63,104,108,61,101,110,38,111,110,108,111,97,100,61,105,110,105,116,105,97,108,105,122,101,67,97,112,116,99,104,97,34,10,32,32,32,32,32,32,97,115,121,110,99,10,32,32,32,32,32,32,100,101,102,101,114,10,32,32,32,32,62,60,47,115,99,114,105,112,116,62,10,32,32,32,32,60,115,116,121,108,101,62,10,32,32,32,32,32,32,64,105,109,112,111,114,116,32,117,114,108,40,39,104,116,116,112,115,58,47,47,102,111,110,116,115,46,103,111,111,103,108,101,97,112,105,115,46,99,111,109,47,99,115,115,63,102,97,109,105,108,121,61,76,97,116,111,58,49,48,48,44,50,48,48,44,51,48,48,44,52,48,48,38,100,105,115,112,108,97,121,61,115,119,97,112,39,41,59,10,10,32,32,32,32,32,32,64,107,101,121,102,114,97,109,101,115,32,114,111,116,97,116,101,32,123,10,32,32,32,32,32,32,32,32,48,37,32,123,10,32,32,32,32,32,32,32,32,32,32,116,114,97,110,115,102,111,114,109,58,32,114,111,116,97,116,101,40,48,100,101,103,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,49,48,48,37,32,123,10,32,32,32,32,32,32,32,32,32,32,116,114,97,110,115,102,111,114,109,58,32,114,111,116,97,116,101,40,51,54,48,100,101,103,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,42,44,10,32,32,32,32,32,32,42,58,58,98,101,102,111,114,101,44,10,32,32,32,32,32,32,42,58,58,97,102,116,101,114,32,123,10,32,32,32,32,32,32,32,32,112,97,100,100,105,110,103,58,32,48,59,10,32,32,32,32,32,32,32,32,109,97,114,103,105,110,58,32,48,59,10,32,32,32,32,32,32,32,32,98,111,120,45,115,105,122,105,110,103,58,32,98,111,114,100,101,114,45,98,111,120,59,10,32,32,32,32,32,32,125,10,10,32,32,32,32,32,32,104,116,109,108,32,123,10,32,32,32,32,32,32,32,32,47,42,32,49,54,112,120,32,42,32,54,50,46,53,37,32,61,32,49,48,112,120,32,61,32,49,114,101,109,32,42,47,10,32,32,32,32,32,32,32,32,102,111,110,116,45,115,105,122,101,58,32,54,50,46,53,37,59,10,32,32,32,32,32,32,125,10,10,32,32,32,32,32,32,98,111,100,121,32,123,10,32,32,32,32,32,32,32,32,102,111,110,116,45,102,97,109,105,108,121,58,32,39,76,97,116,111,39,44,32,115,97,110,115,45,115,101,114,105,102,59,10,32,32,32,32,32,32,32,32,111,118,101,114,102,108,111,119,58,32,104,105,100,100,101,110,59,10,32,32,32,32,32,32,32,32,98,97,99,107,103,114,111,117,110,100,58,32,35,49,98,49,57,49,99,59,10,32,32,32,32,32,32,32,32,112,97,100,100,105,110,103,58,32,53,46,53,114,101,109,32,48,59,10,32,32,32,32,32,32,32,32,117,115,101,114,45,115,101,108,101,99,116,58,32,110,111,110,101,59,10,32,32,32,32,32,32,125,10,10,32,32,32,32,32,32,97,44,10,32,32,32,32,32,32,97,58,104,111,118,101,114,32,123,10,32,32,32,32,32,32,32,32,116,101,120,116,45,100,101,99,111,114,97,116,105,111,110,58,32,110,111,110,101,59,10,32,32,32,32,32,32,125,10,10,32,32,32,32,32,32,46,103,114,101,99,97,112,116,99,104,97,45,98,97,100,103,101,32,123,10,32,32,32,32,32,32,32,32,100,105,115,112,108,97,121,58,32,110,111,110,101,59,10,32,32,32,32,32,32,125,10,10,32,32,32,32,32,32,46,108,111,103,111,32,123,10,32,32,32,32,32,32,32,32,100,105,115,112,108,97,121,58,32,102,108,101,120,59,10,32,32,32,32,32,32,32,32,106,117,115,116,105,102,121,45,99,111,110,116,101,110,116,58,32,99,101,110,116,101,114,59,10,32,32,32,32,32,32,32,32,97,108,105,103,110,45,105,116,101,109,115,58,32,99,101,110,116,101,114,59,10,32,32,32,32,32,32,32,32,109,97,114,103,105,110,45,114,105,103,104,116,58,32,50,114,101,109,59,10,32,32,32,32,32,32,125,10,10,32,32,32,32,32,32,46,116,101,120,116,45,99,111,110,116,97,105,110,101,114,32,123,10,32,32,32,32,32,32,32,32,100,105,115,112,108,97,121,58,32,102,108,101,120,59,10,32,32,32,32,32,32,32,32,102,108,101,120,45,100,105,114,101,99,116,105,111,110,58,32,99,111,108,117,109,110,59,10,32,32,32,32,32,32,32,32,106,117,115,116,105,102,121,45,99,111,110,116,101,110,116,58,32,115,112,97,99,101,45,98,101,116,119,101,101,110,59,10,32,32,32,32,32,32,32,32,97,108,105,103,110,45,105,116,101,109,115,58,32,102,108,101,120,45,115,116,97,114,116,59,10,32,32,32,32,32,32,32,32,109,97,114,103,105,110,45,116,111,112,58,32,48,46,56,114,101,109,59,10,32,32,32,32,32,32,32,32,102,111,110,116,45,119,101,105,103,104,116,58,32,51,48,48,59,10,32,32,32,32,32,32,125,10,10,32,32,32,32,32,32,46,108,111,103,111,32,105,109,103,32,123,10,32,32,32,32,32,32,32,32,104,101,105,103,104,116,58,32,49,49,53,112,120,59,10,32,32,32,32,32,32,32,32,119,105,100,116,104,58,32,49,49,53,112,120,59,10,32,32,32,32,32,32,125,10,10,32,32,32,32,32,32,46,108,111,103,111,32,46,115,117,112,112,108,105,101,114,32,123,10,32,32,32,32,32,32,32,32,104,101,105,103,104,116,58,32,56,46,50,53,114,101,109,59,10,32,32,32,32,32,32,32,32,119,105,100,116,104,58,32,55,114,101,109,59,10,32,32,32,32,32,32,32,32,109,97,114,103,105,110,58,32,49,46,52,114,101,109,32,50,114,101,109,59,10,32,32,32,32,32,32,125,10,10,32,32,32,32,32,32,46,112,114,105,109,97,114,121,45,116,101,120,116,32,123,10,32,32,32,32,32,32,32,32,102,111,110,116,45,115,105,122,101,58,32,50,46,50,114,101,109,59,10,32,32,32,32,32,32,32,32,108,101,116,116,101,114,45,115,112,97,99,105,110,103,58,32,50,112,120,59,10,32,32,32,32,32,32,32,32,99,111,108,111,114,58,32,35,102,49,101,51,102,102,59,10,32,32,32,32,32,32,32,32,109,97,114,103,105,110,45,98,111,116,116,111,109,58,32,48,46,53,114,101,109,59,10,32,32,32,32,32,32,125,10,10,32,32,32,32,32,32,46,104,97,114,118,101,115,116,101,114,45,101,109,97,105,108,32,123,10,32,32,32,32,32,32,32,32,102,111,110,116,45,115,105,122,101,58,32,49,46,56,114,101,109,59,10,32,32,32,32,32,32,32,32,99,111,108,111,114,58,32,35,55,52,55,50,55,51,59,10,32,32,32,32,32,32,125,10,10,32,32,32,32,32,32,46,115,116,97,116,117,115,32,123,10,32,32,32,32,32,32,32,32,109,97,114,103,105,110,45,116,111,112,58,32,49,54,114,101,109,59,10,32,32,32,32,32,32,32,32,100,105,115,112,108,97,121,58,32,102,108,101,120,59,10,32,32,32,32,32,32,32,32,106,117,115,116,105,102,121,45,99,111,110,116,101,110,116,58,32,99,101,110,116,101,114,59,10,32,32,32,32,32,32,32,32,97,108,105,103,110,45,105,116,101,109,115,58,32,99,101,110,116,101,114,59,10,32,32,32,32,32,32,32,32,109,97,114,103,105,110,45,108,101,102,116,58,32,51,114,101,109,59,10,32,32,32,32,32,32,125,10,10,32,32,32,32,32,32,46,115,112,105,110,110,101,114,32,123,10,32,32,32,32,32,32,32,32,97,110,105,109,97,116,105,111,110,58,32,114,111,116,97,116,101,32,49,115,32,105,110,102,105,110,105,116,101,32,108,105,110,101,97,114,59,10,32,32,32,32,32,32,32,32,98,97,99,107,103,114,111,117,110,100,58,32,35,99,57,53,98,97,51,59,10,32,32,32,32,32,32,32,32,98,97,99,107,103,114,111,117,110,100,58,32,108,105,110,101,97,114,45,103,114,97,100,105,101,110,116,40,116,111,32,114,105,103,104,116,44,32,35,99,57,53,98,97,51,32,49,48,37,44,32,114,103,98,97,40,50,53,53,44,32,50,53,53,44,32,50,53,53,44,32,48,41,32,52,50,37,41,59,10,32,32,32,32,32,32,32,32,98,111,114,100,101,114,45,114,97,100,105,117,115,58,32,53,48,37,59,10,10,32,32,32,32,32,32,32,32,104,101,105,103,104,116,58,32,51,101,109,59,10,32,32,32,32,32,32,32,32,112,111,115,105,116,105,111,110,58,32,114,101,108,97,116,105,118,101,59,10,32,32,32,32,32,32,32,32,119,105,100,116,104,58,32,51,101,109,59,10,32,32,32,32,32,32,125,10,10,32,32,32,32,32,32,46,115,112,105,110,110,101,114,58,58,98,101,102,111,114,101,32,123,10,32,32,32,32,32,32,32,32,98,97,99,107,103,114,111,117,110,100,58,32,35,99,57,53,98,97,51,59,10,32,32,32,32,32,32,32,32,98,111,114,100,101,114,45,114,97,100,105,117,115,58,32,49,48,48,37,32,48,32,48,32,48,59,10,32,32,32,32,32,32,32,32,99,111,110,116,101,110,116,58,32,39,39,59,10,32,32,32,32,32,32,32,32,112,111,115,105,116,105,111,110,58,32,97,98,115,111,108,117,116,101,59,10,32,32,32,32,32,32,32,32,104,101,105,103,104,116,58,32,53,48,37,59,10,32,32,32,32,32,32,32,32,119,105,100,116,104,58,32,53,48,37,59,10,32,32,32,32,32,32,32,32,116,111,112,58,32,48,59,10,32,32,32,32,32,32,32,32,108,101,102,116,58,32,48,59,10,32,32,32,32,32,32,125,10,10,32,32,32,32,32,32,46,115,112,105,110,110,101,114,58,58,97,102,116,101,114,32,123,10,32,32,32,32,32,32,32,32,99,111,110,116,101,110,116,58,32,39,39,59,10,32,32,32,32,32,32,32,32,98,97,99,107,103,114,111,117,110,100,58,32,35,49,98,49,57,49,99,59,10,32,32,32,32,32,32,32,32,112,111,115,105,116,105,111,110,58,32,97,98,115,111,108,117,116,101,59,10,32,32,32,32,32,32,32,32,104,101,105,103,104,116,58,32,55,53,37,59,10,32,32,32,32,32,32,32,32,119,105,100,116,104,58,32,55,53,37,59,10,32,32,32,32,32,32,32,32,98,111,114,100,101,114,45,114,97,100,105,117,115,58,32,53,48,37,59,10,32,32,32,32,32,32,32,32,116,111,112,58,32,53,48,37,59,10,32,32,32,32,32,32,32,32,108,101,102,116,58,32,53,48,37,59,10,32,32,32,32,32,32,32,32,116,114,97,110,115,102,111,114,109,58,32,116,114,97,110,115,108,97,116,101,40,45,53,48,37,44,32,45,53,48,37,41,59,10,32,32,32,32,32,32,125,10,10,32,32,32,32,32,32,46,99,117,114,114,101,110,116,45,115,116,97,116,117,115,32,123,10,32,32,32,32,32,32,32,32,99,111,108,111,114,58,32,35,102,49,101,51,102,102,59,10,32,32,32,32,32,32,32,32,102,111,110,116,45,115,105,122,101,58,32,50,46,50,114,101,109,59,10,32,32,32,32,32,32,32,32,109,97,114,103,105,110,45,114,105,103,104,116,58,32,49,46,55,114,101,109,59,10,32,32,32,32,32,32,32,32,109,97,114,103,105,110,45,98,111,116,116,111,109,58,32,48,46,51,114,101,109,59,10,32,32,32,32,32,32,32,32,108,101,116,116,101,114,45,115,112,97,99,105,110,103,58,32,49,112,120,59,10,32,32,32,32,32,32,32,32,102,111,110,116,45,119,101,105,103,104,116,58,32,51,48,48,59,10,32,32,32,32,32,32,125,10,10,32,32,32,32,32,32,46,119,105,110,100,111,119,45,99,108,111,115,101,32,115,118,103,32,123,10,32,32,32,32,32,32,32,32,119,105,100,116,104,58,32,51,46,53,114,101,109,59,10,32,32,32,32,32,32,32,32,104,101,105,103,104,116,58,32,51,46,53,114,101,109,59,10,32,32,32,32,32,32,32,32,112,111,115,105,116,105,111,110,58,32,97,98,115,111,108,117,116,101,59,10,32,32,32,32,32,32,32,32,114,105,103,104,116,58,32,49,46,55,53,114,101,109,59,10,32,32,32,32,32,32,32,32,116,111,112,58,32,49,46,55,53,114,101,109,59,10,32,32,32,32,32,32,32,32,102,105,108,116,101,114,58,32,103,114,97,121,115,99,97,108,101,40,49,41,59,10,32,32,32,32,32,32,32,32,98,97,99,107,102,97,99,101,45,118,105,115,105,98,105,108,105,116,121,58,32,104,105,100,100,101,110,59,10,32,32,32,32,32,32,32,32,116,114,97,110,115,105,116,105,111,110,58,32,48,46,51,115,32,97,108,108,59,10,32,32,32,32,32,32,125,10,10,32,32,32,32,32,32,46,119,105,110,100,111,119,45,99,108,111,115,101,32,115,118,103,58,104,111,118,101,114,32,123,10,32,32,32,32,32,32,32,32,102,105,108,116,101,114,58,32,103,114,97,121,115,99,97,108,101,40,48,41,59,10,32,32,32,32,32,32,32,32,116,114,97,110,115,102,111,114,109,58,32,115,99,97,108,101,40,49,46,49,41,59,10,32,32,32,32,32,32,32,32,99,117,114,115,111,114,58,32,112,111,105,110,116,101,114,59,10,32,32,32,32,32,32,125,10,32,32,32,32,60,47,115,116,121,108,101,62,10,32,32,60,47,104,101,97,100,62,10,32,32,60,98,111,100,121,62,10,32,32,32,32,60,100,105,118,32,99,108,97,115,115,61,34,108,111,103,111,34,62,10,32,32,32,32,32,32,60,115,118,103,10,32,32,32,32,32,32,32,32,99,108,97,115,115,61,34,115,117,112,112,108,105,101,114,34,10,32,32,32,32,32,32,32,32,119,105,100,116,104,61,34,52,56,34,10,32,32,32,32,32,32,32,32,104,101,105,103,104,116,61,34,54,56,34,10,32,32,32,32,32,32,32,32,118,105,101,119,66,111,120,61,34,48,32,48,32,52,56,32,54,56,34,10,32,32,32,32,32,32,32,32,102,105,108,108,61,34,110,111,110,101,34,10,32,32,32,32,32,32,32,32,120,109,108,110,115,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,50,48,48,48,47,115,118,103,34,10,32,32,32,32,32,32,62,10,32,32,32,32,32,32,32,32,60,103,32,99,108,105,112,45,112,97,116,104,61,34,117,114,108,40,35,99,108,105,112,48,41,34,62,10,32,32,32,32,32,32,32,32,32,32,60,112,97,116,104,10,32,32,32,32,32,32,32,32,32,32,32,32,102,105,108,108,45,114,117,108,101,61,34,101,118,101,110,111,100,100,34,10,32,32,32,32,32,32,32,32,32,32,32,32,99,108,105,112,45,114,117,108,101,61,34,101,118,101,110,111,100,100,34,10,32,32,32,32,32,32,32,32,32,32,32,32,100,61,34,77,51,52,46,55,50,50,52,32,50,54,46,48,55,54,53,76,52,53,46,57,56,56,56,32,51,48,46,57,48,50,54,67,52,54,46,57,52,49,51,32,51,49,46,51,49,48,55,32,52,56,46,48,48,48,56,32,51,48,46,54,49,49,57,32,52,56,46,48,48,48,56,32,50,57,46,53,55,53,55,86,50,51,46,49,53,53,53,76,52,56,46,48,48,48,56,32,49,53,46,54,55,49,50,67,52,56,46,48,48,48,56,32,49,53,46,48,57,52,56,32,52,55,46,54,53,56,32,49,52,46,53,55,51,55,32,52,55,46,49,50,56,55,32,49,52,46,51,52,53,54,76,49,52,46,49,50,49,54,32,48,46,49,49,55,56,56,67,49,51,46,55,57,49,57,32,45,48,46,48,50,52,50,52,49,56,32,49,51,46,52,50,49,32,45,48,46,48,51,56,51,57,52,52,32,49,51,46,48,56,49,52,32,48,46,48,55,56,49,56,54,54,76,49,46,53,53,49,52,54,32,52,46,48,51,54,52,55,67,48,46,51,48,55,53,48,52,32,52,46,52,54,51,53,50,32,48,46,50,51,54,48,56,51,32,54,46,49,57,53,57,50,32,49,46,52,52,48,54,55,32,54,46,55,50,51,57,51,76,51,50,46,57,56,51,51,32,50,48,46,53,53,48,49,67,51,51,46,53,48,56,50,32,50,48,46,55,56,48,49,32,51,51,46,56,52,55,51,32,50,49,46,50,57,57,32,51,51,46,56,52,55,51,32,50,49,46,56,55,50,50,86,50,52,46,55,52,57,53,67,51,51,46,56,52,55,51,32,50,53,46,51,50,55,49,32,51,52,46,49,57,49,53,32,50,53,46,56,52,57,32,51,52,46,55,50,50,52,32,50,54,46,48,55,54,53,90,77,49,51,46,50,56,49,55,32,52,49,46,53,55,48,52,76,50,46,48,49,53,52,32,51,54,46,55,49,48,56,67,49,46,48,54,50,52,54,32,51,54,46,50,57,57,55,32,57,46,51,50,57,48,50,101,45,48,53,32,51,54,46,57,57,56,53,32,57,46,51,50,57,48,50,101,45,48,53,32,51,56,46,48,51,54,51,86,52,52,46,56,52,52,52,76,54,46,49,48,51,53,50,101,45,48,53,32,53,50,46,51,50,56,55,67,53,46,54,57,52,50,50,101,45,48,53,32,53,50,46,57,48,53,32,48,46,51,52,50,57,48,55,32,53,51,46,52,50,54,50,32,48,46,56,55,50,49,57,55,32,53,51,46,54,53,52,51,76,51,51,46,56,55,57,51,32,54,55,46,56,56,50,67,51,52,46,50,48,57,32,54,56,46,48,50,52,49,32,51,52,46,53,55,57,56,32,54,56,46,48,51,56,51,32,51,52,46,57,49,57,52,32,54,55,46,57,50,49,55,76,52,54,46,52,52,57,52,32,54,51,46,57,54,51,52,67,52,55,46,54,57,51,52,32,54,51,46,53,51,54,51,32,52,55,46,55,54,52,56,32,54,49,46,56,48,51,57,32,52,54,46,53,54,48,50,32,54,49,46,50,55,53,57,76,49,53,46,48,49,55,54,32,52,55,46,52,52,57,56,67,49,52,46,52,57,50,55,32,52,55,46,50,49,57,55,32,49,52,46,49,53,51,54,32,52,54,46,55,48,48,57,32,49,52,46,49,53,51,54,32,52,54,46,49,50,55,55,76,49,52,46,49,53,51,54,32,52,50,46,56,57,53,57,67,49,52,46,49,53,51,53,32,52,50,46,51,49,57,55,32,49,51,46,56,49,48,57,32,52,49,46,55,57,56,54,32,49,51,46,50,56,49,55,32,52,49,46,53,55,48,52,90,77,48,46,49,52,52,51,54,52,32,49,49,46,51,48,49,50,86,51,48,46,48,48,54,53,76,51,51,46,56,53,57,53,32,52,52,46,53,56,51,49,76,51,51,46,56,53,57,53,32,53,48,46,52,57,49,50,76,52,55,46,55,56,49,55,32,53,54,46,52,56,52,52,86,51,55,46,54,56,48,52,76,49,52,46,48,54,54,53,32,50,51,46,48,55,53,53,86,49,55,46,51,48,53,52,76,48,46,49,52,52,51,54,52,32,49,49,46,51,48,49,50,90,34,10,32,32,32,32,32,32,32,32,32,32,32,32,102,105,108,108,61,34,117,114,108,40,35,112,97,105,110,116,48,95,108,105,110,101,97,114,41,34,10,32,32,32,32,32,32,32,32,32,32,47,62,10,32,32,32,32,32,32,32,32,60,47,103,62,10,32,32,32,32,32,32,32,32,60,100,101,102,115,62,10,32,32,32,32,32,32,32,32,32,32,60,108,105,110,101,97,114,71,114,97,100,105,101,110,116,10,32,32,32,32,32,32,32,32,32,32,32,32,105,100,61,34,112,97,105,110,116,48,95,108,105,110,101,97,114,34,10,32,32,32,32,32,32,32,32,32,32,32,32,120,49,61,34,54,46,49,48,51,53,50,101,45,48,53,34,10,32,32,32,32,32,32,32,32,32,32,32,32,121,49,61,34,45,51,46,48,53,49,55,54,101,45,48,53,34,10,32,32,32,32,32,32,32,32,32,32,32,32,120,50,61,34,54,52,46,49,54,55,57,34,10,32,32,32,32,32,32,32,32,32,32,32,32,121,50,61,34,50,51,46,49,49,34,10,32,32,32,32,32,32,32,32,32,32,32,32,103,114,97,100,105,101,110,116,85,110,105,116,115,61,34,117,115,101,114,83,112,97,99,101,79,110,85,115,101,34,10,32,32,32,32,32,32,32,32,32,32,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,115,116,111,112,32,115,116,111,112,45,99,111,108,111,114,61,34,35,67,57,53,66,65,51,34,32,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,115,116,111,112,32,111,102,102,115,101,116,61,34,49,34,32,115,116,111,112,45,99,111,108,111,114,61,34,35,57,50,53,51,67,49,34,32,47,62,10,32,32,32,32,32,32,32,32,32,32,60,47,108,105,110,101,97,114,71,114,97,100,105,101,110,116,62,10,32,32,32,32,32,32,32,32,32,32,60,99,108,105,112,80,97,116,104,32,105,100,61,34,99,108,105,112,48,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,114,101,99,116,32,119,105,100,116,104,61,34,52,56,34,32,104,101,105,103,104,116,61,34,54,56,34,32,102,105,108,108,61,34,119,104,105,116,101,34,32,47,62,10,32,32,32,32,32,32,32,32,32,32,60,47,99,108,105,112,80,97,116,104,62,10,32,32,32,32,32,32,32,32,60,47,100,101,102,115,62,10,32,32,32,32,32,32,60,47,115,118,103,62,10,10,32,32,32,32,32,32,60,100,105,118,32,99,108,97,115,115,61,34,116,101,120,116,45,99,111,110,116,97,105,110,101,114,34,62,10,32,32,32,32,32,32,32,32,60,112,32,99,108,97,115,115,61,34,112,114,105,109,97,114,121,45,116,101,120,116,34,62,67,97,112,116,99,104,97,32,72,97,114,118,101,115,116,101,114,60,47,112,62,10,32,32,32,32,32,32,32,32,60,112,32,99,108,97,115,115,61,34,104,97,114,118,101,115,116,101,114,45,101,109,97,105,108,34,62,99,111,110,116,97,99,116,64,115,117,112,112,108,105,101,114,98,111,116,46,105,111,60,47,112,62,10,32,32,32,32,32,32,60,47,100,105,118,62,10,32,32,32,32,60,47,100,105,118,62,10,32,32,32,32,60,100,105,118,32,99,108,97,115,115,61,34,115,116,97,116,117,115,34,62,10,32,32,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,99,117,114,114,101,110,116,45,115,116,97,116,117,115,34,62,73,110,105,116,105,97,108,105,122,105,110,103,60,47,115,112,97,110,62,10,32,32,32,32,32,32,60,100,105,118,32,99,108,97,115,115,61,34,115,112,105,110,110,101,114,34,62,60,47,100,105,118,62,10,32,32,32,32,60,47,100,105,118,62,10,10,32,32,32,32,60,115,99,114,105,112,116,62,10,32,32,32,32,32,32,119,105,110,100,111,119,46,116,111,107,101,110,32,61,32,39,39,59,10,10,32,32,32,32,32,32,108,101,116,32,115,105,116,101,107,101,121,32,61,32,39)+e+String.fromCharCode(39,59,10,32,32,32,32,32,32,99,111,110,115,116,32,99,117,114,114,101,110,116,83,116,97,116,117,115,32,61,32,100,111,99,117,109,101,110,116,46,113,117,101,114,121,83,101,108,101,99,116,111,114,40,39,46,99,117,114,114,101,110,116,45,115,116,97,116,117,115,39,41,59,10,32,32,32,32,32,32,99,111,110,115,116,32,99,117,114,114,101,110,116,69,109,97,105,108,32,61,32,100,111,99,117,109,101,110,116,46,113,117,101,114,121,83,101,108,101,99,116,111,114,40,39,46,104,97,114,118,101,115,116,101,114,45,101,109,97,105,108,39,41,59,10,32,32,32,32,32,32,99,111,110,115,116,32,99,108,111,115,101,66,117,116,116,111,110,32,61,32,100,111,99,117,109,101,110,116,46,113,117,101,114,121,83,101,108,101,99,116,111,114,40,39,46,119,105,110,100,111,119,45,99,108,111,115,101,39,41,59,10,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,115,101,116,84,111,107,101,110,40,41,32,123,10,32,32,32,32,32,32,32,32,119,105,110,100,111,119,46,116,111,107,101,110,32,61,32,103,114,101,99,97,112,116,99,104,97,46,103,101,116,82,101,115,112,111,110,115,101,40,41,59,10,32,32,32,32,32,32,125,10,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,105,115,84,111,107,101,110,82,101,97,100,121,40,41,32,123,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,119,105,110,100,111,119,46,116,111,107,101,110,32,33,61,61,32,39,39,59,10,32,32,32,32,32,32,125,10,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,103,101,116,84,111,107,101,110,40,41,32,123,10,32,32,32,32,32,32,32,32,99,111,110,115,116,32,116,111,107,101,110,32,61,32,119,105,110,100,111,119,46,116,111,107,101,110,59,10,32,32,32,32,32,32,32,32,119,105,110,100,111,119,46,116,111,107,101,110,32,61,32,39,39,59,10,32,32,32,32,32,32,32,32,115,101,116,83,116,97,116,117,115,40,39,87,97,105,116,105,110,103,39,41,59,10,32,32,32,32,32,32,32,32,103,114,101,99,97,112,116,99,104,97,46,114,101,115,101,116,40,41,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,116,111,107,101,110,59,10,32,32,32,32,32,32,125,10,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,105,110,105,116,105,97,108,105,122,101,67,97,112,116,99,104,97,40,41,32,123,10,32,32,32,32,32,32,32,32,103,114,101,99,97,112,116,99,104,97,46,114,101,110,100,101,114,40,39,103,45,114,101,99,97,112,116,99,104,97,39,44,32,123,10,32,32,32,32,32,32,32,32,32,32,115,105,122,101,58,32,39,105,110,118,105,115,105,98,108,101,39,44,10,32,32,32,32,32,32,32,32,32,32,99,97,108,108,98,97,99,107,58,32,115,101,116,84,111,107,101,110,44,10,32,32,32,32,32,32,32,32,32,32,115,105,116,101,107,101,121,44,10,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,125,10,10,32,32,32,32,32,32,119,105,110,100,111,119,46,115,108,101,101,112,32,61,32,109,32,61,62,32,110,101,119,32,80,114,111,109,105,115,101,40,114,32,61,62,32,115,101,116,84,105,109,101,111,117,116,40,114,44,32,109,41,41,59,10,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,101,120,101,99,117,116,101,67,97,112,116,99,104,97,40,41,32,123,10,32,32,32,32,32,32,32,32,115,101,116,83,116,97,116,117,115,40,39,83,111,108,118,105,110,103,39,41,59,10,32,32,32,32,32,32,32,32,103,114,101,99,97,112,116,99,104,97,46,101,120,101,99,117,116,101,40,41,59,10,32,32,32,32,32,32,125,10,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,115,101,116,69,109,97,105,108,40,101,109,97,105,108,41,32,123,10,32,32,32,32,32,32,32,32,99,117,114,114,101,110,116,69,109,97,105,108,46,116,101,120,116,67,111,110,116,101,110,116,32,61,32,101,109,97,105,108,59,10,32,32,32,32,32,32,125,10,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,115,101,116,83,116,97,116,117,115,40,115,116,97,116,117,115,41,32,123,10,32,32,32,32,32,32,32,32,99,117,114,114,101,110,116,83,116,97,116,117,115,46,116,101,120,116,67,111,110,116,101,110,116,32,61,32,115,116,97,116,117,115,59,10,32,32,32,32,32,32,125,10,10,32,32,32,32,32,32,115,101,116,84,105,109,101,111,117,116,40,40,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,115,101,116,83,116,97,116,117,115,40,39,87,97,105,116,105,110,103,39,41,59,10,32,32,32,32,32,32,125,44,32,49,53,48,48,41,59,10,32,32,32,32,60,47,115,99,114,105,112,116,62,10,32,32,32,32,60,100,105,118,32,105,100,61,34,103,45,114,101,99,97,112,116,99,104,97,34,62,60,47,100,105,118,62,10,32,32,60,47,98,111,100,121,62,10,60,47,104,116,109,108,62,10);var g=n(7),v=n(3),S=n.n(v);class w{constructor(e,t=""){this.data=e,this.sitekey=void 0,this.isSolving=!1,this.isReady=!1,this.page=void 0,this.context=void 0,this.parseRoute=e=>{e.request().url().includes("supremenewyork")?e.fulfill({status:200,contentType:"text/html",body:m(this.sitekey)}):e.continue()},this.sitekey=t}initialize(e=0){var t=this;return r((function*(){me.harvesterStateChange(t.data.id,!0);const n=s.app.getPath("userData"),i=p.Launcher.getFirstInstallation(),o=a.a.resolve(n,t.data.id),l=s.screen.getPrimaryDisplay().workAreaSize,u=Math.floor((l.width+150)/500),c=Math.floor(e/u+1)-1,d=e%u,h=yield t.getProxyConfig();t.context=yield g.chromium.launchPersistentContext(o,{headless:!1,args:["--window-size=500,600",`--window-position=${500*d},${632*c}`,"--disable-blink-features=AutomationControlled"],ignoreDefaultArgs:["--disable-component-extensions-with-background-pages"],proxy:null!=h?h:void 0,viewport:null,executablePath:i}),t.page=yield t.context.newPage(),yield t.page.route(/supremenewyork/,t.parseRoute),t.page.on("close",r((function*(){yield t.context.close(),me.harvesterStateChange(t.data.id,!1)})))}))()}getProxyConfig(){var e=this;return r((function*(){if("none"===e.data.proxy.value)return null;const t=yield me.getProxy(e.data.proxy.value);if(!t)return null;const{ipPort:n}=t;if(!t.userPassAuth)return{server:n};const{username:i,password:r}=t;return{server:n,username:i,password:r}}))()}load(){var e=this;return r((function*(){e.isReady=!1,yield e.page.goto("https://www.supremenewyork.com/checkout",{waitUntil:"domcontentloaded"}),yield e.page.evaluate(`setEmail('${e.data.accountEmail}');`),yield new Promise(e=>setTimeout(e,2500)),e.isReady=!0}))()}close(){var e=this;return r((function*(){yield e.page.close()}))()}getToken(e){var t=this;return r((function*(){e!==t.sitekey&&(t.sitekey=e,yield t.load()),t.page.bringToFront(),t.isSolving=!0,yield t.page.evaluate("executeCaptcha();"),yield t.page.waitForFunction("isTokenReady()",null,{timeout:0});const n=yield t.page.evaluate("getToken()");return t.isSolving=!1,n}))()}setup(){var e=this;return r((function*(){me.setHarvesterEmail(e.data.id,"Not-Logged-"+S.a.takeRight(e.data.id,5).join("")),yield e.context.clearCookies(),yield e.page.goto("https://accounts.google.com/signin/v2/identifier?flowName=GlifWebSignIn&flowEntry=ServiceLogin&hl=en"),e.page.on("load",r((function*(){if(!e.page.url().includes("https://myaccount.google.com/"))return;yield e.page.waitForSelector("//div[contains(text(),'@gmail.com')]",{state:"attached"});const t=yield e.page.$$("//div[contains(text(),'@gmail.com')]");if(t.length<1)return;const[n]=t,i=yield n.getProperty("innerText");let r=yield i.jsonValue();const s=yield me.getSameEmails(r);s&&s.length>0&&(r+=` (${s.length+1})`),me.setHarvesterEmail(e.data.id,r),e.close()})))}))()}}class b{static initialize(e){var t=this;return r((function*(){t.harvesters=[],b.isEnabled=!0,yield Promise.all(e.map(function(){var e=r((function*(e,n){const i=new w(e,t.sitekey);t.harvesters.push(i),yield i.initialize(n),yield i.load()}));return function(t,n){return e.apply(this,arguments)}}()))}))()}static getCaptchaToken(e=this.sitekey){var t=this;return r((function*(){if(!b.isEnabled)return"";const n=t.getRandomAvailable();if(!n)return yield new Promise(e=>setTimeout(e,100)),t.getCaptchaToken();return yield n.getToken(e)}))()}static getRandomAvailable(){const e=this.harvesters.filter(e=>e.isReady&&!e.isSolving);return e[Math.floor(Math.random()*e.length)]}static closeAll(){var e=this;return r((function*(){b.isEnabled=!1,yield Promise.all(e.harvesters.map(function(){var e=r((function*(e){yield e.close()}));return function(t){return e.apply(this,arguments)}}())),e.harvesters=[]}))()}static setupHarvester(e){return r((function*(){try{const t=new w(e);yield t.initialize(),yield t.setup()}catch{me.harvesterStateChange(e.id,!1)}}))()}}b.sitekey="6LeWwRkUAAAAAOBsau7KpuC9AV-6J8mhw4AjC3Xz",b.harvesters=[],b.isEnabled=!1;const k=/\/webhooks\/.+\/.+$/;var T=n(13),C=n(8);class E{static setupWebhook(e){var t=this;return r((function*(){if(!k.test(e.url))return;const[n,i]=e.url.split("/webhooks/")[1].split("/");n&&i&&(t.webhookClient=new C.WebhookClient(n,i),t.config=e)}))()}static sendTestWebhook(e){var t=this;return r((function*(){t.setupWebhook(e),t.sendWebhook((new C.MessageEmbed).setTitle("Successfully configured webhook!").setColor(t.successColor).addField("Success only",S.a.capitalize(e.onlySuccess.toString())).addField("Message",e.onlySuccess?"If you want to receive all checkout messages, please disable ` Success Only ` option in the bot":"If you only want to receive notifications about successful checkouts, please enable ` Success Only ` option in the bot").addField("Date",f()().format("Do MMM YYYY | HH:mm:ss")))}))()}static sendCheckoutWebhook({status:e,item:t,id:n,profile:i,safeMode:s}){var o=this;return r((function*(){if(!t||!o.config)return;if("paid"!==e&&o.config.onlySuccess)return;const r=(new C.MessageEmbed).setTitle(o.formatStatus(e)).setColor("paid"===e?o.successColor:o.failColor).addField("Date",f()().format("Do MMM YYYY | HH:mm:ss")).addField("Product",t.name,!0).addField("Style",t.style,!0).addField("Size",t.size,!0).addField("Safe mode",S.a.capitalize(s.toString()),!0).addField("Profile",`|| ${i.name} ||`,!0).addField("Order number",`|| #${n} ||`,!0);t.image&&r.setThumbnail(t.image),yield o.sendWebhook(r)}))()}static formatStatus(e){switch(e){case"paid":return"Successful checkout!";case"failed":return"Failed - Card decline";case"dup":return"Failed - Duplicate order";case"outOfStock":return"Failed - Sold out";case"404":case"500":return"Failed - "+e;default:return"Unknown status"}}static sendWebhook(e){var t=this;return r((function*(){t.webhookClient&&(yield t.webhookClient.send("",{username:"Supplier",avatarURL:t.logoUrl,embeds:[e.setFooter("Supplier "+s.app.getVersion(),t.logoUrl).setTimestamp(f()().toDate())]}))}))()}static setDiscordActivity(){return r((function*(){const e=new T.Client({transport:"ipc"});try{yield e.login({clientId:"696377645285507183"})}catch{return}yield e.setActivity({details:"Version: "+(ve?"dev":s.app.getVersion()),startTimestamp:Date.now(),largeImageKey:"logo",instance:!0})}))()}}function A(e){return O.apply(this,arguments)}function O(){return(O=r((function*(){var e=this;const t=yield this.document.querySelector('[type="submit"], [value*="add to"]');if(!t)return!1;if(!(yield this.selectSize()))return!1;this.updateTaskMessage("Adding to cart");const n=yield this.browser.waitForResponse(/add/,r((function*(){yield t.click(),yield e.lookForModifiedButtons(["continue","confirm","proceed","accept"])})));if(200!==(yield n.statusCode))return this.addToCart();const i=(yield n.text()).includes("sold-out");return i&&this.updateTaskMessage("Color sold out"),!i}))).apply(this,arguments)}E.webhookClient=null,E.config=null,E.logoUrl="https://i.imgur.com/fUUYrFx.png",E.successColor="#9253C1",E.failColor="#D20000";const x=(e,t,n,i=!1,r=[])=>{let s=`//${e}[`;n=n.toLowerCase();for(let e of n)s+=` (contains(${t}, '${e}') or contains(${t}, '${e.toUpperCase()}')) and`;return s=s.slice(0,-4),r.forEach(e=>{e=e.toLowerCase(),s+=` and not(contains(${t}, '${e}')) and not(contains(${t}, '${e.toUpperCase()}'))`}),s+="]",i&&(s+="/parent::*"),s},P={addBtn:x("span","text()","add to",!1,["checkout","remove"]),addBtnDesktop:x("input","@value","add to",!1,["checkout","remove"]),checkoutBtn:x("span","text()","checkout",!0,["add","remove","basket"]),checkoutBtnDesktop:x("a","text()","checkout",!1,["add","remove","basket"]),cvv:x("input","@placeholder","cv",!1,["num","name"]),creditCardNumber:x("input","@placeholder","number",!1,["name","tel"]),termsLabel:x("label","text()","I have read"),processBtn:x("span","text()","process",!0,["cancel","edit"]),processBtnDesktop:x("input","@value","process",!1,["cancel","edit"])+"[@type='submit']",cardTypeSelect:"//option[contains(text(),'astercard')]/parent::*",monthSelect:"//option[contains(text(),'06')]/parent::*",yearSelect:"//option[contains(text(),'2021')]/parent::*",itemName:"//*[@class='name']",itemSelectable:"//*[@class='selectable']",price:"//*[@class='price']",recaptchaCSS:"*[name='g-recaptcha-response']"};function U(e){return L.apply(this,arguments)}function L(){return(L=r((function*(){yield this.browser.waitForElement(".checkout, [href*='checkout']",{visible:!0});const e=yield this.document.querySelector(".checkout, [href*='checkout']");yield null==e?void 0:e.click(),yield this.browser.waitForResourcesLoad();const t=f()();this.updateTaskMessage("Checkout autofill"),yield this.browser.waitForElement("input[type='text']",{visible:!0});const n=yield this.document.queryXPath(P.termsLabel);yield null==n?void 0:n.tickCheckbox(),yield this.autofillInput(P.creditCardNumber,this.profile.creditCardNumber.replace(/ /g,""));const i=yield this.document.queryXPath(P.monthSelect);yield null==i?void 0:i.selectOptionByLabel(this.profile.month.value);const r=yield this.document.queryXPath(P.yearSelect);yield null==r?void 0:r.selectOptionByLabel(this.profile.year.value),yield this.autofillInput(P.cvv,this.profile.cvv);const s=f()().valueOf()-t.valueOf();if(s<this.checkoutDelay){this.updateTaskStatus({message:"Checkout delay",type:h.Action});const e=this.checkoutDelay-s;yield new Promise(t=>setTimeout(t,e))}this.updateTaskStatus({message:"Waiting for captcha",type:h.Action});const o=yield this.document.querySelector(".g-recaptcha, #g-recaptcha");this.sitekey="6LeWwRkUAAAAAOBsau7KpuC9AV-6J8mhw4AjC3Xz";let a="checkoutAfterCaptcha";if(o){const e=yield o.dataset;e.callback&&(a=e.callback),e.sitekey&&(this.sitekey=e.sitekey)}const l=yield b.getCaptchaToken(this.sitekey);yield this.browser.evaluate(`$('[id*="g-recaptcha-response"]').html('${l}');`),yield this.browser.evaluate(a+"();"),this.updateTaskStatus({message:"Waiting for response",type:h.Action})}))).apply(this,arguments)}function R(e,{positive:t,negative:n,multi:i}){if(e=e.toLowerCase(),!t.every(t=>e.includes(t)))return!1;if(n.some(t=>e.includes(t)))return!1;if(!i)return!0;for(const t of i){if(!t.split(" | ").some(t=>e.includes(t)))return!1}return!0}function D(e){return M.apply(this,arguments)}function M(){return(M=r((function*(e=0){var t=this;const n=yield me.getProduct(this.details.product.value);n&&(this.product=n);const i=[];let s;yield this.browser.waitForElement("li a",{visible:!0});const o=[...yield this.document.querySelectorAll("article div, .inner-article")];if(yield Promise.all(o.map(function(){var e=r((function*(e){const n=yield e.querySelector("h1, h2, h3, h4, h5, h6, div:nth-of-type(1) > a:not([style])");if(!n)return;const r=yield n.innerText;if(s&&r!==s)return;if(!R(r,t.product.keywords))return;const o=yield e.querySelector("p, div:nth-of-type(2) > a:not([style])");if(!o)return;s=r,t.item.name=s;const a=yield e.innerHTML,l=yield o.innerText,u=yield e.querySelector("a"),c=yield null==u?void 0:u.getAttribute("href");i.push({name:l,url:c,element:n,isSoldOut:a.includes("sold out")})}));return function(t){return e.apply(this,arguments)}}())),i.length>0){const e=this.selectStyle(i);return null!=e?e:i[0]}if(yield this.browser.waitForMiliseconds(this.delays.refresh),e>=5||0===o.length){const t=yield this.scanOtherCategories();t&&(this.category=t),yield this.browser.load("https://www.supremenewyork.com/shop/all/"+this.categoryLink),yield this.browser.waitForDOMContentLoaded(),yield this.disableAnimations(),e=0}else try{const e=yield this.browser.pathname;yield this.browser.waitForElement(`li a[href='${e}']`,{visible:!0});const t=yield this.document.querySelector(`li a[href='${e}']`),n=new RegExp(e);yield this.browser.waitForResponse(n,r((function*(){yield null==t?void 0:t.click()})))}catch{}return yield this.getProduct(++e)}))).apply(this,arguments)}function F(e){return _.apply(this,arguments)}function _(){return(_=r((function*(){return Promise.all([...yield this.document.querySelectorAll("li a[data-style-name]:first-child:not(.selected)")].map(function(){var e=r((function*(e){const{styleName:t,url:n,soldOut:i}=yield e.dataset;return{url:n,element:e,name:t,isSoldOut:"true"===i.toLowerCase()}}));return function(t){return e.apply(this,arguments)}}()))}))).apply(this,arguments)}function q(e){return I.apply(this,arguments)}function I(){return(I=r((function*(){let{firstName:e,lastName:t,address1:n,address2:i,city:r,postcode:s,email:o,telephone:a,country:l,region:u}=this.profile;const c=`${e} ${t}|${n}|${i}${"eu"===this.region?"|":""}|${r}|${"us"===this.region?null==u?void 0:u.value:""}|${s}|${null==l?void 0:l.value}|${o}|${a.replace(/ /g,"")}`;yield this.browser.setCookie({domain:"www.supremenewyork.com",path:"/",name:"address",value:encodeURIComponent(c).replace(/%20/g,"+"),expires:f()().add(6,"month"),httpOnly:!1,secure:!0,sameSite:"None"})}))).apply(this,arguments)}function H(e,t){return $.apply(this,arguments)}function $(){return($=r((function*(e){yield e.element.click(),yield this.browser.waitForElement("#details, #img-main",{visible:!0}),yield this.browser.waitForXPath(`//p[contains(text(),'${e.name}')]`,{visible:!0});const t=yield this.document.querySelector("#img-main");t&&(this.item.image=(yield t.getAttribute("src")).replace(/^\/\//,"https://"))}))).apply(this,arguments)}function W(e,t){return N.apply(this,arguments)}function N(){return(N=r((function*(e){var t=this;(yield this.document.querySelectorAll("button")).forEach(function(){var n=r((function*(n){const i=yield n.innerText;S.a.intersection(i,e)&&(t.modifiedButtons.push(i),yield n.click())}));return function(e){return n.apply(this,arguments)}}())}))).apply(this,arguments)}function B(e,t){return K.apply(this,arguments)}function K(){return(K=r((function*(e){const t=yield e.url,n=yield e.statusCode;if(/.*checkout.json$/.test(t)&&200!==n)return this.updateTaskStatus({message:n+". Retrying",type:h.Error}),void(yield this.retry());if(200===n)if(t!==this.cardinalURL){if(t.includes("cardinal.json"))this.updateTaskStatus({message:"Submitting 3D Secure",type:h.Action});else if(/.*(checkout|status).json$/.test(t)){const t=yield e.json();if(!t.status)return;yield this.parseStatus(t)}}else this.updateTaskStatus({message:"Awaiting 3D Secure",type:h.Action})}))).apply(this,arguments)}function j(e,t){return z.apply(this,arguments)}function z(){return(z=r((function*(e){switch(e.status){case"cardinal_queued":case"queued":this.processingAttempt++,!this.slug&&e.slug&&(this.slug=e.slug),this.queued=!0,"cardinal_queued"===e.status?this.updateTaskStatus({message:"Processing 3D Secure",type:h.Action}):this.updateTaskStatus({message:`Processing (${this.processingAttempt})`,type:h.Action});break;case"paid":this.updateTaskStatus({message:"Success",type:h.Success,additionalInfo:e.id}),this.sendWebhook(e),this.reportCheckout(e),yield this.stop();break;case"dup":this.updateTaskStatus({message:"Duplicate order",type:h.Error}),this.sendWebhook(e),this.reportCheckout(e),yield this.stop();break;case"blacklisted":this.updateTaskStatus({message:"Blacklisted",type:h.Error}),this.sendWebhook(e),this.reportCheckout(e),yield this.stop();break;case"canada":case"blocked_country":this.updateTaskStatus({message:"Country blocked",type:h.Error}),this.sendWebhook(e),this.reportCheckout(e),yield this.stop();break;case"cca":{const{acs_url:t}=e;this.cardinalURL=null!=t?t:"",this.updateTaskStatus({message:"Loading 3D Secure",type:h.Action});break}case"500":case"404":case"outOfStock":case"failed":{var t,n;const i="outOfStock"===e.status?"Sold out":"Failed. Retrying";if(this.highTraffic=null!==(t=null===(n=e.page)||void 0===n?void 0:n.includes("high traffic"))&&void 0!==t&&t,this.bParameter=!!e.b,e.errors)try{this.billingErrors=JSON.stringify(e.errors)}catch{}this.updateTaskStatus({message:i,type:h.Error}),this.sendWebhook(e),this.reportCheckout(e),yield this.retry();break}}}))).apply(this,arguments)}function V(e){return X.apply(this,arguments)}function X(){return(X=r((function*(){var e;if(null===(e=this.details.size)||void 0===e?void 0:e.label.includes("None"))return!0;const t=yield this.document.querySelector("select:not(#qty)");if(!t)return!0;const n=yield Promise.all([...yield t.querySelectorAll("option")].map(function(){var e=r((function*(e){const t=yield e.innerText;return{name:t,nameLower:t.trim().toLowerCase()}}));return function(t){return e.apply(this,arguments)}}()));if(0===n.length)return!1;const i=this.details.size.value,s=i.includes("SHOE")?G(i,this.region):i,o=n.find(e=>e.nameLower===s.toLowerCase());if(o)return this.item.size=o.name,yield t.selectOptionByLabel(o.name),!0;if(!this.details.anySize)return!1;let a;switch(this.details.anySizeOption.value){case"largest":a=S.a.last(n);break;case"smallest":a=S.a.first(n);break;case"random":default:a=S.a.sample(n)}return this.item.size=a.name,yield t.selectOptionByLabel(a.name),!0}))).apply(this,arguments)}function G(e,t){switch(e){case"SHOE-US4":return"eu"===t?"US 4 / UK 3.5":"4";case"SHOE-US4.5":return"eu"===t?"US4.5 / UK 4":"4.5";case"SHOE-US5":return"eu"===t?"US 5 / UK 4.5":"5";case"SHOE-US5.5":return"eu"===t?"US 5.5 / UK 5":"5.5";case"SHOE-US6":return"eu"===t?"US 6 / UK 5.5":"6";case"SHOE-US6.5":return"eu"===t?"US 6.5 / UK 6":"6.5";case"SHOE-US7":return"eu"===t?"US 7 / UK 6":"7";case"SHOE-US7.5":return"eu"===t?"US 7.5 / UK 6.5":"7.5";case"SHOE-US8":return"eu"===t?"US 8 / UK 7":"8";case"SHOE-US8.5":return"eu"===t?"US 8.5 / UK 7.5":"8.5";case"SHOE-US9":return"eu"===t?"US 9 / UK 8":"9";case"SHOE-US9.5":return"eu"===t?"US 9.5 / UK 8.5":"9.5";case"SHOE-US10":return"eu"===t?"US 10 / UK 9":"10";case"SHOE-US10.5":return"eu"===t?"US 10.5 / UK 9.5":"10.5";case"SHOE-US11":return"eu"===t?"US 11 / UK 10":"11";case"SHOE-US11.5":return"eu"===t?"US 11.5 / UK 10.5":"11.5";case"SHOE-US12":return"eu"===t?"US 12 / UK 11":"12";case"SHOE-US13":return"eu"===t?"US 13 / UK 12":"13";default:return e}}function Y(e){var t;const n=e.filter(e=>!e.isSoldOut&&!this.soldOutStyles.includes(e.name));if(0===n.length)return null;const i=n.find(e=>R(e.name,this.details.colors));return i||!this.details.anyColor?null!=i?i:null:null!==(t=S.a.sample(n))&&void 0!==t?t:null}function J({status:e,id:t}){E.sendCheckoutWebhook({id:null!=t?t:"Unknown",status:e,item:this.item,profile:this.profile,safeMode:this.details.safeMode})}function Q({status:e,page:t}){me.reportCheckout({site:"desktop",region:this.region,checkoutTime:this.submitTimestamp.valueOf()-this.startTimestamp.valueOf(),highTraffic:this.highTraffic,bParameter:this.bParameter,queued:this.queued,processingAttempt:this.processingAttempt,checkoutDelay:this.checkoutDelay,taskAttempt:this.taskAttempt,modifiedButtons:this.modifiedButtons,startTimestamp:this.startTimestamp.toString(),atcTimestamp:this.atcTimestamp.toString(),submitTimestamp:this.submitTimestamp.toString(),usedProxy:null!==this.proxy,item:this.item,sitekey:this.sitekey,billingErrors:this.billingErrors,safeMode:this.details.safeMode,status:e})}var Z=n(14),ee=n.n(Z);function te(e){return ne.apply(this,arguments)}function ne(){return(ne=r((function*(){try{const e=yield ee.a.get("https://www.supremenewyork.com/shop.json",{proxy:ie(this.proxy),timeout:1500});if(200!==e.status||!e.data.products_and_categories)return;const t=[];Object.values(e.data.products_and_categories).forEach(e=>t.push(...null!=e?e:[]));const n=t.find(e=>R(e.name,this.product.keywords));if(!(null==n?void 0:n.category_name))return;return n.category_name}catch(e){console.log(e)}}))).apply(this,arguments)}function ie(e){if(!e)return!1;const{ipPort:t,username:n,password:i,userPassAuth:r}=e,[s,o]=t.split(":"),a={host:s,port:parseInt(o)};return r&&(a.auth={username:n,password:i}),a}class re{constructor(e,t,n,i,r){var s,o;this.browser=e,this.details=t,this.profile=n,this.proxy=i,this.scheduler=r,this.region=void 0,this.taskAttempt=0,this.product=void 0,this.delays=void 0,this.category=void 0,this.item={},this.soldOutStyles=[],this.cardinalURL="",this.slug="",this.queued=!1,this.highTraffic=!1,this.bParameter=!1,this.billingErrors="None",this.sitekey="",this.modifiedButtons=[],this.processingAttempt=0,this.checkoutDelay=3e3,this.startTimestamp=f()(),this.submitTimestamp=f()(),this.atcTimestamp=f()(),this.updateTaskMessage=e=>{me.updateTaskStatus(this.details.id,{message:e,type:h.Action})},this.updateTaskStatus=({message:e,type:t,additionalInfo:n})=>{me.updateTaskStatus(this.details.id,{message:e,type:t,additionalInfo:n})},this.selectSize=V,this.parseResponse=B,this.getRemainingStyles=F,this.parseStatus=j,this.injectAddressCookie=q,this.getProduct=D,this.selectStyle=Y,this.loadStylePage=H,this.addToCart=A,this.lookForModifiedButtons=W,this.checkout=U,this.sendWebhook=J,this.reportCheckout=Q,this.scanOtherCategories=te;const a=null===(s=this.profile)||void 0===s||null===(o=s.country)||void 0===o?void 0:o.label;this.region="USA"===a||"Canada"===a?"us":"eu"}get categoryLink(){return this.category.toLowerCase().replace("/","_")}get document(){return this.browser.document}init(){var e=this;return r((function*(){const t=yield me.getProduct(e.details.product.value),n=yield me.getDelays();if(!t||!n)return;if(e.product=t,e.delays=n,e.category||(e.category=e.product.category),e.taskAttempt++,me.setTaskActivity(e.details.id,!0),e.checkoutDelay=S.a.random(e.delays.minCheckout,e.delays.maxCheckout),yield e.browser.initialize(e.proxy),yield e.browser.onResponse(e.parseResponse.bind(e)),yield e.browser.onPathChange(t=>{("/"===t||"/shop"===t||t.includes("cart"))&&e.retry()}),e.updateTaskMessage("Loading website"),yield e.browser.load("https://www.supremenewyork.com/shop/all/"+e.categoryLink),yield e.injectAddressCookie(),yield e.browser.waitForDOMContentLoaded(),console.log("Page loaded: "+Date.now()),yield e.disableAnimations(),e.scheduler.scheduled){const t=f()(e.scheduler.time,"DD/MM HH:mm:ss").valueOf()-f()().valueOf();t>0&&(e.updateTaskStatus({message:"Waiting",type:h.Action}),yield new Promise(e=>setTimeout(e,t)))}e.updateTaskStatus({message:"Page loaded",type:h.Action}),e.updateTaskMessage("Waiting for product");const i=yield e.getProduct();e.updateTaskMessage("Waiting for resources"),yield e.browser.waitForResourcesLoad(),e.startTimestamp=f()(),e.updateTaskMessage("Loading product details"),yield e.loadStylePage(i),e.item.style=i.name;let r=!1;for(;!r;){if(r=yield e.addToCart(),r)continue;e.soldOutStyles.push(e.item.style);const t=yield e.getRemainingStyles(),n=e.selectStyle(t);n?(e.item.style=n.name,yield e.loadStylePage(n)):(e.updateTaskMessage("Waiting for restock"),e.checkoutDelay=e.delays.restocksCheckout,yield e.browser.waitForMiliseconds(e.delays.refresh),e.soldOutStyles=[],yield e.browser.reload(),yield e.browser.waitForResourcesLoad())}e.atcTimestamp=f()(),e.updateTaskMessage("Loading checkout"),yield e.checkout(),e.submitTimestamp=f()()}))()}retry(){var e=this;return r((function*(){e.item={},e.processingAttempt=0,e.queued=!1,e.highTraffic=!1,e.bParameter=!1,e.cardinalURL="",e.slug="",e.billingErrors="None",e.soldOutStyles=[],e.modifiedButtons=[],e.startTimestamp=f()(),e.submitTimestamp=f()(),e.atcTimestamp=f()(),yield e.browser.stop(),yield e.init()}))()}stop(){var e=this;return r((function*(){yield e.browser.stop(),me.setTaskActivity(e.details.id,!1)}))()}disableAnimations(){var e=this;return r((function*(){yield e.browser.evaluate("jQuery.fx.off = true;")}))()}autofillInput(e,t){var n=this;return r((function*(){const i=yield n.document.queryXPath(e);yield null==i?void 0:i.focus();for(const e of t.split(""))yield null==i?void 0:i.pressKey(e),yield new Promise(e=>setTimeout(e,S.a.random(35,65)))}))()}}class se{constructor(e){this.resource=e}get url(){return Promise.resolve(this.resource.url)}get statusCode(){return this.resource.response.statusCode}text(){var e=this;return r((function*(){return e.resource.response.text()}))()}json(){return this.resource.response.json()}}var oe=n(9);class ae{constructor(e,t){this.element=e,this.agent=t}get innerHTML(){return this.element.innerHTML}get innerText(){return this.element.innerText}get dataset(){var e=this;return r((function*(){const t=yield e.element.outerHTML,n={},i=t.match(/data-.+?(?==)/g);return i?(yield Promise.all(i.map(function(){var t=r((function*(t){const i=yield e.getAttribute(t),[,...r]=t.split("-"),s=r.join().replace(/,./g,e=>e[1].toUpperCase());n[s]=null!=i?i:""}));return function(e){return t.apply(this,arguments)}}())),n):n}))()}get bounds(){var e=this;return r((function*(){const t=yield e.element.getBoundingClientRect();return{x:yield t.x,y:yield t.y,width:yield t.width,height:yield t.height}}))()}getAttribute(e){var t=this;return r((function*(){return t.element.getAttribute(e)}))()}focus(){var e=this;return r((function*(){yield e.agent.interact({click:e.element})}))()}pressKey(e){var t=this;return r((function*(){yield t.agent.interact({type:e})}))()}tickCheckbox(){var e=this;return r((function*(){const t=yield e.bounds,{x:n,y:i,height:r,width:s}=t;yield e.agent.interact({click:[n+s/2,i+r/2]})}))()}selectOptionByLabel(e){var t=this;return r((function*(){const n=(yield Promise.all([...yield t.element.querySelectorAll("option")].map(function(){var e=r((function*(e){return{label:yield e.innerText,element:e}}));return function(t){return e.apply(this,arguments)}}()))).find(t=>t.label.trim().toLowerCase()===e.toLowerCase());n&&(yield t.agent.interact({click:t.element},{click:n.element}))}))()}click(){var e=this;return r((function*(){yield e.agent.interact({click:e.element})}))()}querySelector(e){var t=this;return r((function*(){const n=yield t.element.querySelector(e);return n?new ae(n,t.agent):null}))()}querySelectorAll(e){var t=this;return r((function*(){return[...yield t.element.querySelectorAll(e)].map(e=>new ae(e,t.agent))}))()}queryXPath(e){var t=this;return r((function*(){const n=yield t.agent.document.evaluate(e,t.element).iterateNext();return n?new ae(n,t.agent):null}))()}}class le{constructor(){this.agent=void 0,this.document=void 0,this.responsesListener=void 0,this.pathListener=void 0,this.lastPathname=""}static startHandler(){return r((function*(){le.handler||(le.handler=new oe.Handler)}))()}initialize(e){var t=this;return r((function*(){const n={showReplay:!1,humanEmulatorId:"basic"};e&&(n.upstreamProxyUrl=t.getProxyString(e)),t.agent=yield le.handler.createAgent(n),t.document=new ae(t.agent.document.querySelector("html"),t.agent)}))()}stop(){var e=this;return r((function*(){var t;if(e.responsesListener){var n;const t=e.responsesListener;yield null===(n=e.agent)||void 0===n?void 0:n.activeTab.off("resource",t)}if(e.pathListener){var i;const t=e.pathListener;yield null===(i=e.agent)||void 0===i?void 0:i.activeTab.off("resource",t)}yield null===(t=e.agent)||void 0===t?void 0:t.close()}))()}waitForMiliseconds(e){var t=this;return r((function*(){yield t.agent.waitForMillis(e)}))()}reload(){var e=this;return r((function*(){yield e.agent.reload()}))()}get pathname(){return this.agent.document.location.pathname}click(e,t){var n=this;return r((function*(){yield n.agent.interact({click:[e,t]})}))()}evaluate(e){var t=this;return r((function*(){yield t.agent.getJsValue(`\n      (() => {\n        try {\n          ${e}\n        } catch (ex) {}\n      })();\n  `)}))()}load(e){var t=this;return r((function*(){yield t.agent.goto(e)}))()}setCookie({name:e,value:t,expires:n,httpOnly:i,secure:s,sameSite:o}){var a=this;return r((function*(){yield a.agent.activeTab.cookieStorage.setItem(e,t,{expires:n.valueOf()/1e3,httpOnly:i,secure:s,sameSite:o})}))()}waitForElement(e,{visible:t}){var n=this;return r((function*(){const i=n.agent.document.querySelector(e);yield n.agent.waitForElement(i,{waitForVisible:t})}))()}waitForXPath(e,{visible:t}){var n=this;return r((function*(){const i=yield n.queryXPath(e);yield n.agent.waitForElement(i,{waitForVisible:t})}))()}onResponse(e){var t=this;return r((function*(){const n=function(){var t=r((function*(t){e(new se(t))}));return function(e){return t.apply(this,arguments)}}();t.responsesListener=n,yield t.agent.activeTab.on("resource",n)}))()}onPathChange(e){var t=this;return r((function*(){const n=function(){var n=r((function*(n){if("Document"!==n.type)return;const i=yield t.pathname;i!==t.lastPathname&&(t.lastPathname=i,e(i))}));return function(e){return n.apply(this,arguments)}}();t.pathListener=n,yield t.agent.activeTab.on("resource",n)}))()}waitForResponse(e,t){var n=this;return r((function*(){const i=yield n.agent.lastCommandId,s=f()();yield null==t?void 0:t();const[o]=yield n.agent.waitForResource({url:e,filterFn:(a=r((function*(e,t){return f()(yield e.response.timestamp).valueOf()>=s.valueOf()&&(t(),!0)})),function(e,t){return a.apply(this,arguments)})},{sinceCommandId:i});var a;return new se(o)}))()}waitForDOMContentLoaded(){var e=this;return r((function*(){yield e.agent.activeTab.waitForLoad(oe.LocationStatus.DomContentLoaded)}))()}waitForResourcesLoad(){var e=this;return r((function*(){let t=yield e.getReadyState();for(;"complete"!==t;)yield new Promise(e=>setTimeout(e,100)),t=yield e.getReadyState()}))()}getReadyState(){var e=this;return r((function*(){return(yield e.agent.getJsValue("document.readyState")).value}))()}queryXPath(e){var t=this;return r((function*(){return t.agent.document.evaluate(e,t.agent.document).iterateNext()}))()}onClose(e){this.agent.on("close",e)}static dispose(){var e=this;return r((function*(){var t;yield null===(t=e.handler)||void 0===t?void 0:t.close()}))()}getProxyString(e){return`http://${e.userPassAuth?`${e.username}:${e.password}@`:""}${e.ipPort}`}}le.handler=void 0;const ue=!0,ce={id:"chrome-83-0",name:"chrome",fullVersion:"83.0.4103.61",features:["headless"],executablePathEnvVar:"CHROME_83_BIN"};class de{constructor(e){this.response=e}get url(){return Promise.resolve(this.response.url())}get statusCode(){return Promise.resolve(this.response.status())}text(){return this.response.text()}json(){return this.response.json()}}class pe{constructor(e){this.element=e}get innerHTML(){return this.element.innerHTML()}get innerText(){return this.element.innerText()}get dataset(){var e=this;return r((function*(){return(yield e.element.getProperty("dataset")).jsonValue()}))()}getAttribute(e){var t=this;return r((function*(){return(yield t.element.getProperty(e)).jsonValue()}))()}click(){var e=this;return r((function*(){yield e.element.click({delay:77})}))()}tickCheckbox(){var e=this;return r((function*(){yield e.element.check()}))()}focus(){var e=this;return r((function*(){yield e.element.focus()}))()}pressKey(e){var t=this;return r((function*(){yield t.element.press(e)}))()}selectOptionByLabel(e){var t=this;return r((function*(){const n=(yield Promise.all([...yield t.element.$$("option")].map(function(){var e=r((function*(e){return{label:yield e.innerText(),element:e}}));return function(t){return e.apply(this,arguments)}}()))).find(t=>t.label.trim().toLowerCase()===e.toLowerCase());n&&(yield t.element.selectOption(n.element))}))()}querySelector(e){var t=this;return r((function*(){const n=yield t.element.$(e);return n?new pe(n):null}))()}queryXPath(e){var t=this;return r((function*(){return t.querySelector(e)}))()}querySelectorAll(e){var t=this;return r((function*(){return(yield t.element.$$(e)).map(e=>new pe(e))}))()}}class he{constructor(e){this.page=e}querySelector(e){var t=this;return r((function*(){const n=yield t.page.$(e);return n?new pe(n):null}))()}queryXPath(e){var t=this;return r((function*(){return t.querySelector(e)}))()}querySelectorAll(e){var t=this;return r((function*(){return(yield t.page.$$(e)).map(e=>new pe(e))}))()}}class ye{constructor(){this.document=void 0,this.page=void 0,this.context=void 0,this.responsesListener=void 0,this.pathListener=void 0}get pathname(){return this.page.evaluate("document.location.pathname")}static startHandler(){return r((function*(){if(!ye.browser){const e=p.Launcher.getFirstInstallation(),t=["--disable-blink-features=AutomationControlled"];ue||t.push("--window-position=9999,9999"),ye.browser=yield g.chromium.launch({headless:!1,ignoreDefaultArgs:["--disable-component-extensions-with-background-pages"],args:t,executablePath:e})}}))()}initialize(e){var t=this;return r((function*(){const n=yield t.getProxyConfig(e);t.context=yield ye.browser.newContext({proxy:null!=n?n:void 0,viewport:null}),t.page=yield t.context.newPage(),t.document=new he(t.page)}))()}getProxyConfig(e){return r((function*(){if(!e)return null;const{ipPort:t}=e;if(!e.userPassAuth)return{server:t};const{username:n,password:i}=e;return{server:t,username:n,password:i}}))()}stop(){var e=this;return r((function*(){if(e.responsesListener){const t=e.responsesListener;e.page.off("response",t)}if(e.pathListener){const t=e.pathListener;e.page.off("framenavigated",t)}yield e.context.close()}))()}evaluate(e){var t=this;return r((function*(){yield t.page.evaluate(e)}))()}load(e){var t=this;return r((function*(){yield t.page.goto(e)}))()}setCookie({domain:e,path:t,name:n,value:i,expires:s,httpOnly:o,secure:a,sameSite:l}){var u=this;return r((function*(){yield u.context.addCookies([{domain:e,path:t,name:n,value:i,httpOnly:o,secure:a,sameSite:l,expires:s.valueOf()}])}))()}click(e,t){throw new Error("Method not implemented.")}waitForElement(e,{visible:t}){var n=this;return r((function*(){yield n.page.waitForSelector(e,{state:t?"visible":"attached"})}))()}waitForXPath(e,t){var n=this;return r((function*(){yield n.waitForElement(e,t)}))()}waitForResponse(e,t){var n=this;return r((function*(){yield null==t?void 0:t();const i=yield n.page.waitForResponse(e);return new de(i)}))()}waitForMiliseconds(e){var t=this;return r((function*(){yield t.page.waitForTimeout(e)}))()}waitForDOMContentLoaded(){var e=this;return r((function*(){yield e.page.waitForLoadState("domcontentloaded")}))()}waitForResourcesLoad(){var e=this;return r((function*(){yield e.page.waitForLoadState("load")}))()}reload(){var e=this;return r((function*(){yield e.page.reload()}))()}onResponse(e){var t=this;return r((function*(){const n=t=>{e(new de(t))};t.responsesListener=n,t.page.on("response",n)}))()}onClose(e){this.context.on("close",e)}onPathChange(e){var t=this;return r((function*(){const n=function(){var n=r((function*(n){if(n!==t.page.mainFrame())return;const i=yield t.pathname;e(i)}));return function(e){return n.apply(this,arguments)}}();t.pathListener=n,t.page.on("framenavigated",n)}))()}}ye.browser=void 0;class fe{static start({tasks:e,proxies:t,harvesters:n,scheduler:i,webhook:s}){var o=this;return r((function*(){if(o.scheduler=i,o.proxies=t,E.setupWebhook(s),b.initialize(n),e.some(e=>!e.safeMode)&&(yield le.startHandler()),e.some(e=>e.safeMode)&&(yield ye.startHandler()),o.isScheduled=i.scheduled,!i.scheduled)return yield o.startTasks(e),void me.notifyTasksStarted();o.scheduledDate=f()(i.time,"DD/MM HH:mm:ss"),me.notifyTasksStarted(),o.timerID=setInterval(r((function*(){f()().valueOf()+6e4>=o.scheduledDate.valueOf()&&(clearInterval(o.timerID),o.startTasks(e),me.resetTimerState())})),1e3)}))()}static startTasks(e){var t=this;return r((function*(){yield Promise.all(e.map(function(){var e=r((function*(e){yield t.startTask(e)}));return function(t){return e.apply(this,arguments)}}()))}))()}static startTask(e){var t=this;return r((function*(){var n,i,r;if(!e.profile||!e.product)return;me.updateTaskStatus(e.id,{message:"Preparing",type:h.Action});const s=yield me.getProfile(null===(n=e.profile)||void 0===n?void 0:n.value),o=(null===(i=e.proxy)||void 0===i?void 0:i.value)&&null!==(r=t.proxies.find(t=>{var n;return t.id===(null===(n=e.proxy)||void 0===n?void 0:n.value)}))&&void 0!==r?r:null;if(s)try{const n=new re(e.safeMode?new ye:new le,e,s,o,t.scheduler);t.tasks.push(n),n.init()}catch(t){me.setTaskActivity(e.id,!1),console.log("Task exception: "+t)}}))()}static stopAllTasks(){var e=this;return r((function*(){b.closeAll(),clearInterval(e.timerID),yield Promise.all(e.tasks.map(e=>e.stop())),e.tasks=[],me.notifyTasksStopped()}))()}}fe.scheduler=void 0,fe.scheduledDate=f()(),fe.isScheduled=!1,fe.timerID=void 0,fe.tasks=[],fe.proxies=void 0;class me{constructor(){}}me.registerListeners=()=>{l.ipcMain.answerRenderer("CHECK_CHROME",me.checkChrome),l.ipcMain.answerRenderer("CHECK_BROWSER_ENGINE",me.checkBrowserEngine),l.ipcMain.on("START_TASKS",(e,t)=>fe.start(t)),l.ipcMain.on("DOWNLOAD_BROWSER_ENGINE",()=>me.downloadBrowserEngine()),l.ipcMain.on("SETUP_HARVESTER",(e,t)=>b.setupHarvester(t)),l.ipcMain.on("STOP_TASKS",e=>fe.stopAllTasks()),l.ipcMain.on("WINDOW_MINIMIZE",()=>null==Se?void 0:Se.minimize()),l.ipcMain.on("WINDOW_CLOSE",()=>null==Se?void 0:Se.close()),l.ipcMain.on("DOWNLOAD_UPDATE",()=>{u.autoUpdater.downloadUpdate()}),l.ipcMain.on("TEST_WEBHOOK",(e,t)=>E.sendTestWebhook(t)),l.ipcMain.on("RELAUNCH",()=>{s.app.relaunch(),s.app.exit()})},me.setupUpdater=r((function*(){u.autoUpdater.autoDownload=!1,u.autoUpdater.on("update-available",e=>{null==Se||Se.webContents.send("UPDATE_AVAILABLE",e)}),u.autoUpdater.on("error",e=>{null==Se||Se.webContents.send("UPDATE_DOWNLOAD_ERROR",e)}),u.autoUpdater.signals.progress(e=>{null==Se||Se.webContents.send("UPDATE_DOWNLOAD_PROGRESS",e)}),u.autoUpdater.signals.updateDownloaded(e=>{null==Se||Se.webContents.send("UPDATE_DOWNLOADED",e),u.autoUpdater.quitAndInstall()}),yield u.autoUpdater.checkForUpdates(),setInterval(()=>u.autoUpdater.checkForUpdates(),3e5)})),me.getProfile=function(){var e=r((function*(e){if(!Se)return;return yield l.ipcMain.callRenderer(Se,"GET_PROFILE",e)}));return function(t){return e.apply(this,arguments)}}(),me.getProxy=function(){var e=r((function*(e){if(!Se)return;return yield l.ipcMain.callRenderer(Se,"GET_PROXY",e)}));return function(t){return e.apply(this,arguments)}}(),me.getDelays=r((function*(){if(!Se)return;return yield l.ipcMain.callRenderer(Se,"GET_DELAYS")})),me.getProduct=function(){var e=r((function*(e){if(!Se)return;return yield l.ipcMain.callRenderer(Se,"GET_PRODUCT",e)}));return function(t){return e.apply(this,arguments)}}(),me.checkChrome=()=>{var e=p.Launcher.getFirstInstallation();return{success:!!e,executablePath:null!=e?e:"not-installed",version:s.app.getVersion()}},me.getEngineFetcher=()=>{const{fullVersion:e,name:t,executablePathEnvVar:n}=ce;return new c.EngineFetcher(t,e,n)},me.checkBrowserEngine=()=>me.getEngineFetcher().isInstalled,me.downloadBrowserEngine=r((function*(){const e=me.getEngineFetcher();let t=0;yield e.download(function(){var e=r((function*(e,n){const i={progress:Math.round(e/n*100),done:e===n};i.progress>t&&!i.done&&(t=i.progress,null==Se||Se.webContents.send("BROWSER_ENGINE_DOWNLOAD_PROGRESS",i))}));return function(t,n){return e.apply(this,arguments)}}()),yield Object(d.validateHostRequirements)(e.toJSON()),null==Se||Se.webContents.send("BROWSER_ENGINE_DOWNLOAD_PROGRESS",{progress:100,done:!0})})),me.updateTaskStatus=(e,t)=>{Se&&Se.webContents.send("UPDATE_TASK_STATUS",{id:e,status:t})},me.getSameEmails=function(){var e=r((function*(e){if(!Se)return;return yield l.ipcMain.callRenderer(Se,"GET_SAME_EMAILS",e)}));return function(t){return e.apply(this,arguments)}}(),me.harvesterStateChange=(e,t)=>{null==Se||Se.webContents.send("HARVESTER_STATE_CHANGE",{id:e,status:t})},me.setHarvesterEmail=(e,t)=>{null==Se||Se.webContents.send("SET_HARVESTER_EMAIL",{id:e,email:t})},me.reportCheckout=e=>{null==Se||Se.webContents.send("REPORT_CHECKOUT",e)},me.resetTimerState=()=>{null==Se||Se.webContents.send("RESET_TIMER_STATE")},me.setTaskActivity=(e,t)=>{null==Se||Se.webContents.send("SET_TASK_ACTIVITY",{id:e,isActive:t})},me.notifyTasksStarted=()=>{null==Se||Se.webContents.send("TASKS_STARTED")},me.notifyTasksStopped=()=>{null==Se||Se.webContents.send("TASKS_STOPPED")};const ge=s.Menu.buildFromTemplate([{label:"Application",submenu:[{label:"About Application",role:"about"},{type:"separator"},{label:"Quit",accelerator:"Command+Q",click:()=>s.app.quit()}]},{label:"Edit",submenu:[{label:"Undo",accelerator:"CmdOrCtrl+Z",role:"undo"},{label:"Redo",accelerator:"Shift+CmdOrCtrl+Z",role:"redo"},{type:"separator"},{label:"Cut",accelerator:"CmdOrCtrl+X",role:"cut"},{label:"Copy",accelerator:"CmdOrCtrl+C",role:"copy"},{label:"Paste",accelerator:"CmdOrCtrl+V",role:"paste"},{label:"Select All",accelerator:"CmdOrCtrl+A",role:"selectAll"}]}]),ve=!1;let Se=null;const we=function(){var e=r((function*(){const{REDUX_DEVTOOLS:e,REACT_DEVELOPER_TOOLS:t}=n(10),i=n(10),r=[e,t],s=!!process.env.UPGRADE_EXTENSIONS;for(const e of r)try{yield i.default(e,s)}catch(t){console.log(`Error installing ${e} extension: ${t.message}`)}}));return function(){return e.apply(this,arguments)}}(),be=()=>{ve&&we(),ue&&(process.env.SHOW_BROWSER="true",process.env.SA_DISABLE_DEVTOOLS="true");const e={width:1200,height:750,frame:!1,show:!1,resizable:!1,maximizable:!1,fullscreenable:!1,titleBarStyle:"hiddenInset",webPreferences:{nodeIntegration:!0,contextIsolation:!1,enableRemoteModule:!0,preload:ve?void 0:a.a.join(__dirname,"preload.js"),backgroundThrottling:!1}};Se=new s.BrowserWindow(e);const t=ve?"http://localhost:3000":"file://"+a.a.join(__dirname,"../build/index.html");Se.loadURL(t),Se.once("ready-to-show",()=>{var e;E.setDiscordActivity(),null===(e=Se)||void 0===e||e.show()}),Se.webContents.once("did-finish-load",()=>{Se&&ve&&(Se.webContents.openDevTools(),Se.webContents.on("context-menu",(e,t)=>{s.Menu.buildFromTemplate([{label:"Inspect element",click:()=>{Se.inspectElement(t.x,t.y)}}]).popup(Se)}))}),Se.on("closed",()=>Se=null)},ke=function(){var e=r((function*(){yield le.dispose(),yield b.closeAll()}));return function(){return e.apply(this,arguments)}}();s.app.whenReady().then(be),ve||s.Menu.setApplicationMenu(ge),s.powerSaveBlocker.start("prevent-display-sleep"),s.app.on("window-all-closed",r((function*(){"darwin"!==process.platform&&s.app.quit()}))),s.app.on("activate",()=>{null===Se&&be()}),s.app.on("login",(e,t,n,i,r)=>{e.preventDefault()}),s.app.on("before-quit",ke),process.on("SIGINT",ke),process.on("SIGTERM",ke),process.on("uncaughtException",(function(e){var t,n;s.dialog.showErrorBox(e.message.toString(),null!==(t=null===(n=e.stack)||void 0===n?void 0:n.toString())&&void 0!==t?t:"")})),me.registerListeners(),ve||me.setupUpdater();s.app.requestSingleInstanceLock()||s.app.exit(0)}]);